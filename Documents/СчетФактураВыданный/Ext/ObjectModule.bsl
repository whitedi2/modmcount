
&Перед("ПередЗаписью")
Процедура УУ_ПередЗаписью(Отказ, РежимЗаписи, РежимПроведения)

	Если Модифицированность() Тогда
		Если ДополнительныеСвойства.Свойство("НеДобавлятьЗаписьВРегистрИзмененных") Тогда
			Если Не ДополнительныеСвойства.НеДобавлятьЗаписьВРегистрИзмененных Тогда
				сабОбщегоНазначенияБУХ.УстановитьМодифицированностьБУДокумента(ЭтотОбъект, Ссылка, РежимЗаписи);
			КонецЕсли;
		Иначе
			сабОбщегоНазначенияБУХ.УстановитьМодифицированностьБУДокумента(ЭтотОбъект, Ссылка, РежимЗаписи);
		КонецЕсли;
	КонецЕсли;  
	
	Если НЕ ЭтоНовый() Тогда
		Если (ОбменДанными.Загрузка Или ЭтотОбъект.ДополнительныеСвойства.Свойство("ЭтоОбмен")) И АвтообновленияЗаблокированы Тогда
			ИгнорироватьБлокАвтообновления = Справочники.сабМониторВнедрения.ПолучитьЗначениеНастройки("сабИгнорироватьБлокировкуАвтообновленийДокументов");
			Если Не ИгнорироватьБлокАвтообновления Тогда
				ЭтотОбъект.Прочитать();
				ОбменДанными.Загрузка = Не ЭтотОбъект.ДополнительныеСвойства.Свойство("ЭтоОбмен");   
			КонецЕсли;
		КонецЕсли; 
	КонецЕсли;
КонецПроцедуры

&После("ПриУстановкеНовогоНомера")
Процедура УУ_ПриУстановкеНовогоНомера(СтандартнаяОбработка, Префикс)
	БюджетныйНаСервере.ПриУстановкеНовогоНомераПриУстановкеНовогоНомераБУ(ЭтотОбъект, СтандартнаяОбработка, Префикс);
КонецПроцедуры

&Перед("УстановитьПредставлениеНомера")
Процедура УУ_УстановитьПредставлениеНомера()
	
	Если НЕ ЗначениеЗаполнено(Номер) Тогда 
		сабИспользоватьСквознуюНумерациюРеализацияСФ = Справочники.сабМониторВнедрения.ПолучитьЗначениеНастройки("сабИспользоватьСквознуюНумерациюРеализацияСФ");
		
		Если сабИспользоватьСквознуюНумерациюРеализацияСФ И ЗначениеЗаполнено(ЭтотОбъект.ДокументОснование) Тогда
			Номер = ЭтотОбъект.ДокументОснование.Номер;	
		КонецЕсли;
		
	КонецЕсли;
	
КонецПроцедуры

