
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Список.Параметры.УстановитьЗначениеПараметра("Сумма", Параметры.Сумма);
	Список.Параметры.УстановитьЗначениеПараметра("ФинСтатья", ВНХСтатьиРасход());
	Список.Параметры.УстановитьЗначениеПараметра("Дата1", НачалоМесяца(Параметры.Дата));
	Список.Параметры.УстановитьЗначениеПараметра("Дата2", КонецМесяца(Параметры.Дата));
	Список.Параметры.УстановитьЗначениеПараметра("ТекДокумент", Параметры.ТекДокумент);
	
КонецПроцедуры

&НаСервереБезКонтекста
Функция ВНХСтатьиРасход()
	МассивСтатей = Новый Массив;
	Запрос = Новый Запрос;
	Запрос.Текст = "ВЫБРАТЬ
	|	СтатьиДвиженияДенежныхСредств.Ссылка КАК Ссылка
	|ИЗ
	|	Справочник.СтатьиДвиженияДенежныхСредств КАК СтатьиДвиженияДенежныхСредств
	|ГДЕ
	|	СтатьиДвиженияДенежныхСредств.Доход = ЛОЖЬ
	|	И НЕ СтатьиДвиженияДенежныхСредств.ОбратнаяСтатьяВНХ = ЗНАЧЕНИЕ(Справочник.СтатьиДвиженияДенежныхСредств.ПустаяСсылка)";
	
	Запрос.УстановитьПараметр("", );
	
	Результат = Запрос.Выполнить();
	Возврат Результат.Выгрузить().ВыгрузитьКолонку("Ссылка");
	
КонецФункции // ()


&НаКлиенте
Процедура Выбрать(Команда)
	ВыбратьИЗакрыть()
КонецПроцедуры


&НаКлиенте
Процедура СписокВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	СтандартнаяОбработка = Ложь;
	ВыбратьИЗакрыть()
КонецПроцедуры

&НаКлиенте
Процедура ВыбратьИЗакрыть()
	ТекСтрока = Элементы.Список.ДанныеСтроки(Элементы.Список.ТекущаяСтрока);
	Закрыть(Новый Структура("Регистратор, НомерСтроки", ТекСтрока.Ссылка, ТекСтрока.НомерСтроки)); 
КонецПроцедуры


