<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetUnion">
		<name>НаборДанных3</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПредприятиеСубконто1</dataPath>
			<field>ПредприятиеСубконто1</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Субконто1</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<condition>true</condition>
			</useRestriction>
			<attributeUseRestriction>
				<condition>true</condition>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Подразделение</dataPath>
			<field>Подразделение</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаНачальныйОстаток</dataPath>
			<field>СуммаНачальныйОстаток</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>СуммаНач</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<role>
				<dcscom:balance>true</dcscom:balance>
				<dcscom:balanceGroupName>Сумма2</dcscom:balanceGroupName>
				<dcscom:balanceType>OpeningBalance</dcscom:balanceType>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаНачальныйОстатокКорр</dataPath>
			<field>СуммаНачальныйОстатокКорр</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>СуммаНач корр</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<role>
				<dcscom:balance>true</dcscom:balance>
				<dcscom:balanceGroupName>Сумма</dcscom:balanceGroupName>
				<dcscom:balanceType>OpeningBalance</dcscom:balanceType>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаОборотДт</dataPath>
			<field>СуммаОборотДт</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>СуммаДт</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаОборотДтКорр</dataPath>
			<field>СуммаОборотДтКорр</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>СуммаДт Корр</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Валюта</dataPath>
			<field>Валюта</field>
			<useRestriction>
				<condition>true</condition>
			</useRestriction>
			<attributeUseRestriction>
				<condition>true</condition>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Субконто2</dataPath>
			<field>Субконто2</field>
			<useRestriction>
				<condition>true</condition>
			</useRestriction>
			<attributeUseRestriction>
				<condition>true</condition>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаОборотКт</dataPath>
			<field>СуммаОборотКт</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>СуммаКт</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаОборотКтКорр</dataPath>
			<field>СуммаОборотКтКорр</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>СуммаКт Корр</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаКонечныйОстаток</dataPath>
			<field>СуммаКонечныйОстаток</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>СуммаКон</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<role>
				<dcscom:balance>true</dcscom:balance>
				<dcscom:balanceGroupName>Сумма2</dcscom:balanceGroupName>
				<dcscom:balanceType>ClosingBalance</dcscom:balanceType>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаКонечныйОстатокКорр</dataPath>
			<field>СуммаКонечныйОстатокКорр</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>СуммаКон Корр</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<group>true</group>
			</useRestriction>
			<role>
				<dcscom:balance>true</dcscom:balance>
				<dcscom:balanceGroupName>Сумма</dcscom:balanceGroupName>
				<dcscom:balanceType>ClosingBalance</dcscom:balanceType>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Счет</dataPath>
			<field>Счет</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Предприятия</dataPath>
			<field>Предприятия</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Субконто1</dataPath>
			<field>Субконто1</field>
			<useRestriction>
				<condition>true</condition>
			</useRestriction>
			<attributeUseRestriction>
				<condition>true</condition>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Субконто3</dataPath>
			<field>Субконто3</field>
			<useRestriction>
				<condition>true</condition>
			</useRestriction>
			<attributeUseRestriction>
				<condition>true</condition>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СценарийПлана</dataPath>
			<field>СценарийПлана</field>
			<useRestriction>
				<condition>true</condition>
			</useRestriction>
			<attributeUseRestriction>
				<condition>true</condition>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Дата</dataPath>
			<field>Дата</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<item xsi:type="DataSetQuery">
			<name>НаборДанных1</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>ПредприятиеСубконто1</dataPath>
				<field>ПредприятиеСубконто1</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Субконто1</v8:content>
					</v8:item>
				</title>
				<useRestriction>
					<condition>true</condition>
				</useRestriction>
				<attributeUseRestriction>
					<condition>true</condition>
				</attributeUseRestriction>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Подразделение</dataPath>
				<field>Подразделение</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаНачальныйОстаток</dataPath>
				<field>СуммаНачальныйОстаток</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>СуммаНач</v8:content>
					</v8:item>
				</title>
				<useRestriction>
					<group>true</group>
				</useRestriction>
				<role>
					<dcscom:balance>true</dcscom:balance>
					<dcscom:balanceGroupName>Сумма2</dcscom:balanceGroupName>
					<dcscom:balanceType>OpeningBalance</dcscom:balanceType>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаНачальныйОстатокКорр</dataPath>
				<field>СуммаНачальныйОстатокКорр</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>СуммаНач корр</v8:content>
					</v8:item>
				</title>
				<useRestriction>
					<group>true</group>
				</useRestriction>
				<role>
					<dcscom:balance>true</dcscom:balance>
					<dcscom:balanceGroupName>Сумма</dcscom:balanceGroupName>
					<dcscom:balanceType>OpeningBalance</dcscom:balanceType>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Валюта</dataPath>
				<field>Валюта</field>
				<useRestriction>
					<condition>true</condition>
				</useRestriction>
				<attributeUseRestriction>
					<condition>true</condition>
				</attributeUseRestriction>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Субконто2</dataPath>
				<field>Субконто2</field>
				<useRestriction>
					<condition>true</condition>
				</useRestriction>
				<attributeUseRestriction>
					<condition>true</condition>
				</attributeUseRestriction>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаКонечныйОстаток</dataPath>
				<field>СуммаКонечныйОстаток</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>СуммаКон</v8:content>
					</v8:item>
				</title>
				<useRestriction>
					<group>true</group>
				</useRestriction>
				<role>
					<dcscom:balance>true</dcscom:balance>
					<dcscom:balanceGroupName>Сумма2</dcscom:balanceGroupName>
					<dcscom:balanceType>ClosingBalance</dcscom:balanceType>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаКонечныйОстатокКорр</dataPath>
				<field>СуммаКонечныйОстатокКорр</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>СуммаКон Корр</v8:content>
					</v8:item>
				</title>
				<useRestriction>
					<group>true</group>
				</useRestriction>
				<role>
					<dcscom:balance>true</dcscom:balance>
					<dcscom:balanceGroupName>Сумма</dcscom:balanceGroupName>
					<dcscom:balanceType>ClosingBalance</dcscom:balanceType>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Счет</dataPath>
				<field>Счет</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Предприятия</dataPath>
				<field>Предприятия</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Субконто1</dataPath>
				<field>Субконто1</field>
				<useRestriction>
					<condition>true</condition>
				</useRestriction>
				<attributeUseRestriction>
					<condition>true</condition>
				</attributeUseRestriction>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Субконто3</dataPath>
				<field>Субконто3</field>
				<useRestriction>
					<condition>true</condition>
				</useRestriction>
				<attributeUseRestriction>
					<condition>true</condition>
				</attributeUseRestriction>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СценарийПлана</dataPath>
				<field>СценарийПлана</field>
				<useRestriction>
					<condition>true</condition>
				</useRestriction>
				<attributeUseRestriction>
					<condition>true</condition>
				</attributeUseRestriction>
			</field>
			<dataSource>ИсточникДанных1</dataSource>
			<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВЫБОР
		КОГДА Свой.Субконто1 ЕСТЬ NULL
			ТОГДА Чужой.Предприятия
		ИНАЧЕ Свой.Субконто1
	КОНЕЦ КАК ПредприятиеСубконто1,
	СУММА(ЕСТЬNULL(-Чужой.СуммаНачальныйОстаток, 0)) КАК СуммаНачальныйОстатокКорр,
	СУММА(ЕСТЬNULL(-Чужой.СуммаКонечныйОстаток, 0)) КАК СуммаКонечныйОстатокКорр,
	СУММА(ЕСТЬNULL(Свой.СуммаНачальныйОстаток, 0)) КАК СуммаНачальныйОстаток,
	СУММА(ЕСТЬNULL(Свой.СуммаКонечныйОстаток, 0)) КАК СуммаКонечныйОстаток,
	ВЫБОР
		КОГДА &amp;ПоСубсчетам
			ТОГДА ВЫБОР
					КОГДА Свой.Счет ЕСТЬ NULL
						ТОГДА Чужой.Счет
					ИНАЧЕ Свой.Счет
				КОНЕЦ
		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Учетный.ПустаяСсылка)
	КОНЕЦ КАК Счет,
	ВЫБОР
		КОГДА Свой.Предприятия ЕСТЬ NULL
			ТОГДА Чужой.Субконто1
		ИНАЧЕ Свой.Предприятия
	КОНЕЦ КАК Предприятия
ИЗ
	РегистрБухгалтерии.Учетный.ОстаткиИОбороты(&amp;Дата1, &amp;Дата2, , , Счет.Родитель.Код = "79", , ) КАК Свой
		ПОЛНОЕ СОЕДИНЕНИЕ РегистрБухгалтерии.Учетный.ОстаткиИОбороты(&amp;Дата1, &amp;Дата2, , , Счет.Родитель.Код = "79", , ) КАК Чужой
		ПО Свой.Субконто1 = Чужой.Предприятия
			И Свой.Счет = Чужой.Счет
			И Свой.Предприятия = Чужой.Субконто1

СГРУППИРОВАТЬ ПО
	ВЫБОР
		КОГДА &amp;ПоСубсчетам
			ТОГДА ВЫБОР
					КОГДА Свой.Счет ЕСТЬ NULL
						ТОГДА Чужой.Счет
					ИНАЧЕ Свой.Счет
				КОНЕЦ
		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Учетный.ПустаяСсылка)
	КОНЕЦ,
	ВЫБОР
		КОГДА Свой.Субконто1 ЕСТЬ NULL
			ТОГДА Чужой.Предприятия
		ИНАЧЕ Свой.Субконто1
	КОНЕЦ,
	ВЫБОР
		КОГДА Свой.Предприятия ЕСТЬ NULL
			ТОГДА Чужой.Субконто1
		ИНАЧЕ Свой.Предприятия
	КОНЕЦ

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВЫБОР
		КОГДА Свой.Субконто2 ЕСТЬ NULL
			ТОГДА Чужой.Предприятия
		ИНАЧЕ Свой.Субконто2
	КОНЕЦ,
	СУММА(ЕСТЬNULL(-Чужой.СуммаНачальныйОстаток, 0)),
	СУММА(ЕСТЬNULL(-Чужой.СуммаКонечныйОстаток, 0)),
	СУММА(ЕСТЬNULL(Свой.СуммаНачальныйОстаток, 0)),
	СУММА(ЕСТЬNULL(Свой.СуммаКонечныйОстаток, 0)),
	ВЫБОР
		КОГДА &amp;ПоСубсчетам
			ТОГДА ВЫБОР
					КОГДА Свой.Счет ЕСТЬ NULL
						ТОГДА Чужой.Счет
					ИНАЧЕ Свой.Счет
				КОНЕЦ
		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Учетный.ПустаяСсылка)
	КОНЕЦ,
	ВЫБОР
		КОГДА Свой.Предприятия ЕСТЬ NULL
			ТОГДА Чужой.Субконто2
		ИНАЧЕ Свой.Предприятия
	КОНЕЦ
ИЗ
	РегистрБухгалтерии.Учетный.ОстаткиИОбороты(&amp;Дата1, &amp;Дата2, , , Счет.Родитель.Код = "55", , ) КАК Свой
		ПОЛНОЕ СОЕДИНЕНИЕ РегистрБухгалтерии.Учетный.ОстаткиИОбороты(&amp;Дата1, &amp;Дата2, , , Счет.Родитель.Код = "55", , ) КАК Чужой
		ПО Свой.Субконто2 = Чужой.Предприятия
			И Свой.Счет = Чужой.Счет
			И Свой.Предприятия = Чужой.Субконто2

СГРУППИРОВАТЬ ПО
	ВЫБОР
		КОГДА &amp;ПоСубсчетам
			ТОГДА ВЫБОР
					КОГДА Свой.Счет ЕСТЬ NULL
						ТОГДА Чужой.Счет
					ИНАЧЕ Свой.Счет
				КОНЕЦ
		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Учетный.ПустаяСсылка)
	КОНЕЦ,
	ВЫБОР
		КОГДА Свой.Субконто2 ЕСТЬ NULL
			ТОГДА Чужой.Предприятия
		ИНАЧЕ Свой.Субконто2
	КОНЕЦ,
	ВЫБОР
		КОГДА Свой.Предприятия ЕСТЬ NULL
			ТОГДА Чужой.Субконто2
		ИНАЧЕ Свой.Предприятия
	КОНЕЦ

УПОРЯДОЧИТЬ ПО
	Счет,
	ПредприятиеСубконто1</query>
		</item>
		<item xsi:type="DataSetQuery">
			<name>НаборДанных2</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>ПредприятиеСубконто1</dataPath>
				<field>ПредприятиеСубконто1</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Предприятие субконто1</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Подразделение</dataPath>
				<field>Подразделение</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Валюта</dataPath>
				<field>Валюта</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Субконто2</dataPath>
				<field>Субконто2</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаОборотКт</dataPath>
				<field>СуммаОборотКт</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Сумма оборот кт</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаОборотКтКорр</dataPath>
				<field>СуммаОборотКтКорр</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Сумма оборот кт корр</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаОборотДт</dataPath>
				<field>СуммаОборотДт</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Сумма оборот дт</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СуммаОборотДтКорр</dataPath>
				<field>СуммаОборотДтКорр</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Сумма оборот дт корр</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Счет</dataPath>
				<field>Счет</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Предприятия</dataPath>
				<field>Предприятия</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Дата</dataPath>
				<field>Дата</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Дата</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Субконто1</dataPath>
				<field>Субконто1</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Субконто3</dataPath>
				<field>Субконто3</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>СценарийПлана</dataPath>
				<field>СценарийПлана</field>
			</field>
			<dataSource>ИсточникДанных1</dataSource>
			<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВЫБОР
		КОГДА Свой.Субконто1 ЕСТЬ NULL
			ТОГДА Чужой.Предприятия
		ИНАЧЕ Свой.Субконто1
	КОНЕЦ КАК ПредприятиеСубконто1,
	СУММА(ЕСТЬNULL(Чужой.СуммаОборотДт, 0)) КАК СуммаОборотКтКорр,
	СУММА(ЕСТЬNULL(Чужой.СуммаОборотКт, 0)) КАК СуммаОборотДтКорр,
	СУММА(ЕСТЬNULL(Свой.СуммаОборотДт, 0)) КАК СуммаОборотДт,
	СУММА(ЕСТЬNULL(Свой.СуммаОборотКт, 0)) КАК СуммаОборотКт,
	ВЫБОР
		КОГДА &amp;ПоСубсчетам
			ТОГДА ВЫБОР
					КОГДА Свой.Счет ЕСТЬ NULL
						ТОГДА Чужой.Счет
					ИНАЧЕ Свой.Счет
				КОНЕЦ
		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Учетный.ПустаяСсылка)
	КОНЕЦ КАК Счет,
	ВЫБОР
		КОГДА Свой.Предприятия ЕСТЬ NULL
			ТОГДА Чужой.Субконто1
		ИНАЧЕ Свой.Предприятия
	КОНЕЦ КАК Предприятия,
	ЕСТЬNULL(Свой.Период, Чужой.Период) КАК Дата
ИЗ
	РегистрБухгалтерии.Учетный.ОстаткиИОбороты(&amp;Дата1, &amp;Дата2, День, , Счет.Родитель.Код = "79", , ) КАК Свой
		ПОЛНОЕ СОЕДИНЕНИЕ РегистрБухгалтерии.Учетный.ОстаткиИОбороты(&amp;Дата1, &amp;Дата2, День, , Счет.Родитель.Код = "79", , ) КАК Чужой
		ПО Свой.Субконто1 = Чужой.Предприятия
			И Свой.Счет = Чужой.Счет
			И Свой.Предприятия = Чужой.Субконто1
			И Свой.Период = Чужой.Период

СГРУППИРОВАТЬ ПО
	ВЫБОР
		КОГДА &amp;ПоСубсчетам
			ТОГДА ВЫБОР
					КОГДА Свой.Счет ЕСТЬ NULL
						ТОГДА Чужой.Счет
					ИНАЧЕ Свой.Счет
				КОНЕЦ
		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Учетный.ПустаяСсылка)
	КОНЕЦ,
	ВЫБОР
		КОГДА Свой.Субконто1 ЕСТЬ NULL
			ТОГДА Чужой.Предприятия
		ИНАЧЕ Свой.Субконто1
	КОНЕЦ,
	ВЫБОР
		КОГДА Свой.Предприятия ЕСТЬ NULL
			ТОГДА Чужой.Субконто1
		ИНАЧЕ Свой.Предприятия
	КОНЕЦ,
	ЕСТЬNULL(Свой.Период, Чужой.Период)

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВЫБОР
		КОГДА Свой.Субконто2 ЕСТЬ NULL
			ТОГДА Чужой.Предприятия
		ИНАЧЕ Свой.Субконто2
	КОНЕЦ,
	СУММА(ЕСТЬNULL(Чужой.СуммаОборотДт, 0)),
	СУММА(ЕСТЬNULL(Чужой.СуммаОборотКт, 0)),
	СУММА(ЕСТЬNULL(Свой.СуммаОборотДт, 0)),
	СУММА(ЕСТЬNULL(Свой.СуммаОборотКт, 0)),
	ВЫБОР
		КОГДА &amp;ПоСубсчетам
			ТОГДА ВЫБОР
					КОГДА Свой.Счет ЕСТЬ NULL
						ТОГДА Чужой.Счет
					ИНАЧЕ Свой.Счет
				КОНЕЦ
		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Учетный.ПустаяСсылка)
	КОНЕЦ,
	ВЫБОР
		КОГДА Свой.Предприятия ЕСТЬ NULL
			ТОГДА Чужой.Субконто2
		ИНАЧЕ Свой.Предприятия
	КОНЕЦ,
	ЕСТЬNULL(Свой.Период, Чужой.Период)
ИЗ
	РегистрБухгалтерии.Учетный.ОстаткиИОбороты(&amp;Дата1, &amp;Дата2, День, , Счет.Родитель.Код = "55.01", , ) КАК Свой
		ПОЛНОЕ СОЕДИНЕНИЕ РегистрБухгалтерии.Учетный.ОстаткиИОбороты(&amp;Дата1, &amp;Дата2, День, , Счет.Родитель.Код = "55.01", , ) КАК Чужой
		ПО Свой.Субконто2 = Чужой.Предприятия
			И Свой.Счет = Чужой.Счет
			И Свой.Предприятия = Чужой.Субконто2
			И Свой.Период = Чужой.Период

СГРУППИРОВАТЬ ПО
	ВЫБОР
		КОГДА &amp;ПоСубсчетам
			ТОГДА ВЫБОР
					КОГДА Свой.Счет ЕСТЬ NULL
						ТОГДА Чужой.Счет
					ИНАЧЕ Свой.Счет
				КОНЕЦ
		ИНАЧЕ ЗНАЧЕНИЕ(ПланСчетов.Учетный.ПустаяСсылка)
	КОНЕЦ,
	ВЫБОР
		КОГДА Свой.Субконто2 ЕСТЬ NULL
			ТОГДА Чужой.Предприятия
		ИНАЧЕ Свой.Субконто2
	КОНЕЦ,
	ВЫБОР
		КОГДА Свой.Предприятия ЕСТЬ NULL
			ТОГДА Чужой.Субконто2
		ИНАЧЕ Свой.Предприятия
	КОНЕЦ,
	ЕСТЬNULL(Свой.Период, Чужой.Период)

УПОРЯДОЧИТЬ ПО
	Счет,
	ПредприятиеСубконто1</query>
		</item>
	</dataSet>
	<totalField>
		<dataPath>СуммаКонечныйОстаток</dataPath>
		<expression>Сумма(СуммаКонечныйОстаток)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаКонечныйОстатокКорр</dataPath>
		<expression>Сумма(СуммаКонечныйОстатокКорр)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаНачальныйОстаток</dataPath>
		<expression>Сумма(СуммаНачальныйОстаток)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаНачальныйОстатокКорр</dataPath>
		<expression>Сумма(СуммаНачальныйОстатокКорр)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаОборотДт</dataPath>
		<expression>Сумма(СуммаОборотДт)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаОборотДтКорр</dataPath>
		<expression>Сумма(СуммаОборотДтКорр)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаОборотКт</dataPath>
		<expression>Сумма(СуммаОборотКт)</expression>
	</totalField>
	<totalField>
		<dataPath>СуммаОборотКтКорр</dataPath>
		<expression>Сумма(СуммаОборотКтКорр)</expression>
	</totalField>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>v8:StandardPeriod</v8:Type>
		</valueType>
		<value xsi:type="v8:StandardPeriod">
			<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
			<v8:startDate>0001-01-01T00:00:00</v8:startDate>
			<v8:endDate>0001-01-01T00:00:00</v8:endDate>
		</value>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>НачалоПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Начало периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;Период.ДатаНАчала</expression>
	</parameter>
	<parameter>
		<name>КонецПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;Период.ДатаОкончания</expression>
	</parameter>
	<parameter>
		<name>Дата1</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата1</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;Период.ДатаНАчала</expression>
	</parameter>
	<parameter>
		<name>Дата2</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата2</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;Период.ДатаОкончания</expression>
	</parameter>
	<parameter>
		<name>ПоСубсчетам</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>По субсчетам</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>false</useRestriction>
		<use>Always</use>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="xs:string">Основной</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Сальдо на начало</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаНачальныйОстаток</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаНачальныйОстатокКорр</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Horizontally</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Дебет</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаОборотДт</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаОборотДтКорр</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Horizontally</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Кредит</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаОборотКт</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаОборотКтКорр</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Horizontally</dcsset:placement>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemFolder">
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Сальдо на конец</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаКонечныйОстаток</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>СуммаКонечныйОстатокКорр</dcsset:field>
					</dcsset:item>
					<dcsset:placement>Auto</dcsset:placement>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:userSettingID>abb1e818-cfbe-4cbf-a9e6-bb55e94d23cf</dcsset:userSettingID>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Период</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardPeriod">
						<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
						<v8:startDate>0001-01-01T00:00:00</v8:startDate>
						<v8:endDate>0001-01-01T00:00:00</v8:endDate>
					</dcscor:value>
					<dcsset:userSettingID>57e8508d-2774-43d7-b96e-d672f685ed1e</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ПоСубсчетам</dcscor:parameter>
					<dcscor:value xsi:type="xs:boolean">false</dcscor:value>
					<dcsset:userSettingID>2a9fc52a-687a-4ab1-9641-effdffdd605d</dcsset:userSettingID>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:conditionalAppearance>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>СуммаКонечныйОстаток</dcsset:field>
						</dcsset:item>
						<dcsset:item>
							<dcsset:field>СуммаКонечныйОстатокКорр</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">СуммаКонечныйОстаток</dcsset:left>
							<dcsset:comparisonType>NotEqual</dcsset:comparisonType>
							<dcsset:right xsi:type="dcscor:Field">СуммаКонечныйОстатокКорр</dcsset:right>
						</dcsset:item>
					</dcsset:filter>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ЦветФона</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Color">#FFCC99</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>СуммаНачальныйОстаток</dcsset:field>
						</dcsset:item>
						<dcsset:item>
							<dcsset:field>СуммаНачальныйОстатокКорр</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">СуммаНачальныйОстаток</dcsset:left>
							<dcsset:comparisonType>NotEqual</dcsset:comparisonType>
							<dcsset:right xsi:type="dcscor:Field">СуммаНачальныйОстатокКорр</dcsset:right>
						</dcsset:item>
					</dcsset:filter>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ЦветФона</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Color">#FFCC99</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>СуммаОборотДт</dcsset:field>
						</dcsset:item>
						<dcsset:item>
							<dcsset:field>СуммаОборотДтКорр</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">СуммаОборотДт</dcsset:left>
							<dcsset:comparisonType>NotEqual</dcsset:comparisonType>
							<dcsset:right xsi:type="dcscor:Field">СуммаОборотДтКорр</dcsset:right>
						</dcsset:item>
					</dcsset:filter>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ЦветФона</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Color">#FFCC99</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>СуммаОборотКт</dcsset:field>
						</dcsset:item>
						<dcsset:item>
							<dcsset:field>СуммаОборотКтКорр</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">СуммаОборотКт</dcsset:left>
							<dcsset:comparisonType>NotEqual</dcsset:comparisonType>
							<dcsset:right xsi:type="dcscor:Field">СуммаОборотКтКорр</dcsset:right>
						</dcsset:item>
					</dcsset:filter>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ЦветФона</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Color">#FFCC99</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
			</dcsset:conditionalAppearance>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьЗаголовок</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Output</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Заголовок</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Отчет по ВНХ расчетам</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:groupItems>
					<dcsset:item xsi:type="dcsset:GroupItemField">
						<dcsset:field>Предприятия</dcsset:field>
						<dcsset:groupType>Items</dcsset:groupType>
						<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
						<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
						<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
					</dcsset:item>
				</dcsset:groupItems>
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
				<dcsset:item xsi:type="dcsset:StructureItemGroup">
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Счет</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
					<dcsset:item xsi:type="dcsset:StructureItemGroup">
						<dcsset:groupItems>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:field>ПредприятиеСубконто1</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
						</dcsset:groupItems>
						<dcsset:order>
							<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
						</dcsset:order>
						<dcsset:selection>
							<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
						</dcsset:selection>
						<dcsset:item xsi:type="dcsset:StructureItemGroup">
							<dcsset:groupItems>
								<dcsset:item xsi:type="dcsset:GroupItemField">
									<dcsset:field>Дата</dcsset:field>
									<dcsset:groupType>Items</dcsset:groupType>
									<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
									<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
									<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
								</dcsset:item>
							</dcsset:groupItems>
							<dcsset:order>
								<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
							</dcsset:order>
							<dcsset:selection>
								<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
							</dcsset:selection>
						</dcsset:item>
					</dcsset:item>
				</dcsset:item>
			</dcsset:item>
			<dcsset:itemsUserSettingID>aa89e707-06c7-487f-a335-c35d77e5f886</dcsset:itemsUserSettingID>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>