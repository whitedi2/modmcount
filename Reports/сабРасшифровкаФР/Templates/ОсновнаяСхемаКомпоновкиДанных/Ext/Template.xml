<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>НаборДанных1</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Счет</dataPath>
			<field>Счет</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Субконто1</dataPath>
			<field>Субконто1</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Субконто2</dataPath>
			<field>Субконто2</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Валюта</dataPath>
			<field>Валюта</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СценарийПлана</dataPath>
			<field>СценарийПлана</field>
			<useRestriction>
				<condition>true</condition>
				<group>true</group>
			</useRestriction>
			<attributeUseRestriction>
				<condition>true</condition>
				<group>true</group>
			</attributeUseRestriction>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Статья25счета</dataPath>
			<field>Статья25счета</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Статья25счета</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Субконто3</dataPath>
			<field>Субконто3</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Предприятия</dataPath>
			<field>Предприятия</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Регистратор</dataPath>
			<field>Регистратор</field>
			<role>
				<dcscom:periodNumber>1</dcscom:periodNumber>
				<dcscom:periodType>Main</dcscom:periodType>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Подразделение</dataPath>
			<field>Подразделение</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КорСубконто1</dataPath>
			<field>КорСубконто1</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КорСубконто2</dataPath>
			<field>КорСубконто2</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КорСубконто3</dataPath>
			<field>КорСубконто3</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПодразделениеКор</dataPath>
			<field>ПодразделениеКор</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВалютаКор</dataPath>
			<field>ВалютаКор</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТипНоменклатуры</dataPath>
			<field>ТипНоменклатуры</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Тип номенклатуры</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КорСчет</dataPath>
			<field>КорСчет</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Сценарий</dataPath>
			<field>Сценарий</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Валюта1</dataPath>
			<field>Валюта1</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Валюта2</dataPath>
			<field>Валюта2</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Номенклатура</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СтатьяЗатрат</dataPath>
			<field>СтатьяЗатрат</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Статья затрат</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>План</dataPath>
			<field>План</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>План</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Период</dataPath>
			<field>Период</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Период</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Факт</dataPath>
			<field>Факт</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Факт</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Статья</dataPath>
			<field>Статья</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Статья</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Порядок</dataPath>
			<field>Порядок</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Порядок</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПланЧистаяЦена</dataPath>
			<field>ПланЧистаяЦена</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>План чистая цена</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ФактЧистаяЦена</dataPath>
			<field>ФактЧистаяЦена</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Факт чистая цена</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Контрагент</dataPath>
			<field>Контрагент</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Контрагент</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	ВЫБОР
		КОГДА &amp;Сводный
			ТОГДА ЗНАЧЕНИЕ(Справочник.Предприятия.ПустаяСсылка)
		ИНАЧЕ БюджетныйОбороты.Предприятия
	КОНЕЦ КАК Предприятия,
	ВЫБОР
		КОГДА БюджетныйОбороты.Предприятия.УчетПоПодразделениям
			ТОГДА ЕСТЬNULL(БюджетныйОбороты.Подразделение, "Основное")
		ИНАЧЕ "Основное"
	КОНЕЦ КАК Подразделение,
	ВЫБОР
		КОГДА БюджетныйОбороты.Счет.Код = "91"
			ТОГДА "Прочее"
		ИНАЧЕ БюджетныйОбороты.Субконто1
	КОНЕЦ КАК Номенклатура,
	ВЫБОР
		КОГДА БюджетныйОбороты.Счет.Код = "90.03"
			ТОГДА БюджетныйОбороты.Субконто2
		КОГДА БюджетныйОбороты.Счет.Код = "91"
			ТОГДА БюджетныйОбороты.Субконто1
		КОГДА БюджетныйОбороты.Счет.Код = "90.02"
			ТОГДА БюджетныйОбороты.КорСубконто1
		КОГДА БюджетныйОбороты.Счет.Код = "90.01"
			ТОГДА БюджетныйОбороты.Субконто2
		ИНАЧЕ NULL
	КОНЕЦ КАК КоммерческаяСтатья,
	ВЫБОР
		КОГДА БюджетныйОбороты.СценарийПлана В (&amp;Сценарий1)
			ТОГДА -БюджетныйОбороты.СуммаОборот * ЕСТЬNULL(Б_ПлановыеКурсыВалютСрезПоследних1.Курс, 1)
		ИНАЧЕ 0
	КОНЕЦ КАК План,
	БюджетныйОбороты.СценарийПлана КАК СценарийПлана,
	ВЫБОР
		КОГДА &amp;Интервал = "Месяц"
			ТОГДА НАЧАЛОПЕРИОДА(БюджетныйОбороты.Период, МЕСЯЦ)
		КОГДА &amp;Интервал = "Квартал"
			ТОГДА НАЧАЛОПЕРИОДА(БюджетныйОбороты.Период, КВАРТАЛ)
		ИНАЧЕ НАЧАЛОПЕРИОДА(БюджетныйОбороты.Период, ГОД)
	КОНЕЦ КАК Период,
	ВЫБОР
		КОГДА БюджетныйОбороты.СценарийПлана В (&amp;Сценарий2)
			ТОГДА -БюджетныйОбороты.СуммаОборот * ЕСТЬNULL(Б_ПлановыеКурсыВалютСрезПоследних2.Курс, 1)
		ИНАЧЕ 0
	КОНЕЦ КАК Факт,
	ВЫБОР
		КОГДА БюджетныйОбороты.Счет.Код = "90.01"
				ИЛИ БюджетныйОбороты.Счет.Код = "90.03"
					И БюджетныйОбороты.КорСчет.Код = "68.01"
			ТОГДА "Выручка от реализации"
		КОГДА БюджетныйОбороты.Счет.Код = "90.02"
			ТОГДА "Себестоимость"
		КОГДА БюджетныйОбороты.Счет.Код = "90.03"
				И НЕ БюджетныйОбороты.КорСчет.Код = "68.01"
			ТОГДА "Расходы"
		КОГДА БюджетныйОбороты.Счет.Код = "91"
			ТОГДА БюджетныйОбороты.Субконто1
		КОГДА БюджетныйОбороты.Счет.Код = "90.04"
			ТОГДА "Реализация материалов"
		КОГДА БюджетныйОбороты.Счет.Код = "90.05"
			ТОГДА "Реализация ОС"
	КОНЕЦ КАК Статья,
	БюджетныйОбороты.Счет КАК Счет,
	ВЫБОР
		КОГДА БюджетныйОбороты.КорСчет.Код = "25"
				ИЛИ БюджетныйОбороты.КорСчет.Код = "26"
				ИЛИ БюджетныйОбороты.КорСчет.Код = "44"
			ТОГДА "Постоянные расходы (косвенные)"
		ИНАЧЕ ВЫБОР
				КОГДА БюджетныйОбороты.Счет.Код = "91"
					ТОГДА "Прочие доходы и расходы"
				ИНАЧЕ "Реализация"
			КОНЕЦ
	КОНЕЦ КАК Порядок,
	ВЫБОР
		КОГДА БюджетныйОбороты.СценарийПлана В (&amp;Сценарий1)
				И БюджетныйОбороты.Счет.Код = "90.01"
			ТОГДА -БюджетныйОбороты.СуммаОборот
		ИНАЧЕ 0
	КОНЕЦ КАК ПланЧистаяЦена,
	ВЫБОР
		КОГДА БюджетныйОбороты.СценарийПлана В (&amp;Сценарий2)
				И БюджетныйОбороты.Счет.Код = "90.01"
			ТОГДА -БюджетныйОбороты.СуммаОборот * ЕСТЬNULL(Б_ПлановыеКурсыВалютСрезПоследних2.Курс, 1)
		ИНАЧЕ 0
	КОНЕЦ КАК ФактЧистаяЦена,
	ВЫБОР
		КОГДА БюджетныйОбороты.КорСчет.Код = "25"
				ИЛИ БюджетныйОбороты.КорСчет.Код = "26"
				ИЛИ БюджетныйОбороты.КорСчет.Код = "44"
			ТОГДА БюджетныйОбороты.КорСубконто1
		ИНАЧЕ NULL
	КОНЕЦ КАК Статья25счета,
	ВЫБОР
		КОГДА БюджетныйОбороты.Счет.Код = "91"
			ТОГДА "Прочее"
		КОГДА БюджетныйОбороты.Счет.Код = "90.04"
			ТОГДА "Материалы"
		КОГДА БюджетныйОбороты.Счет.Код = "90.05"
			ТОГДА "Основные средства"
		ИНАЧЕ ВЫРАЗИТЬ(БюджетныйОбороты.Субконто1 КАК Справочник.Номенклатура).ВидНоменклатуры
	КОНЕЦ КАК ТипНоменклатуры,
	ВЫБОР
		КОГДА БюджетныйОбороты.СценарийПлана В (&amp;Сценарий1)
			ТОГДА -БюджетныйОбороты.СуммаОборотДт
		ИНАЧЕ 0
	КОНЕЦ КАК ПланДт,
	ВЫБОР
		КОГДА БюджетныйОбороты.СценарийПлана В (&amp;Сценарий2)
			ТОГДА -БюджетныйОбороты.СуммаОборотДт
		ИНАЧЕ 0
	КОНЕЦ КАК ФактДт,
	ВЫБОР
		КОГДА БюджетныйОбороты.СценарийПлана В (&amp;Сценарий1)
			ТОГДА -БюджетныйОбороты.СуммаОборотКт
		ИНАЧЕ 0
	КОНЕЦ КАК ПланКт,
	ВЫБОР
		КОГДА БюджетныйОбороты.СценарийПлана В (&amp;Сценарий2)
			ТОГДА -БюджетныйОбороты.СуммаОборотКт
		ИНАЧЕ 0
	КОНЕЦ КАК ФактКт,
	ВЫБОР
		КОГДА БюджетныйОбороты.Счет.Код = "90.02"
				ИЛИ БюджетныйОбороты.Счет.Код = "90.01"
			ТОГДА БюджетныйОбороты.Субконто2
		КОГДА БюджетныйОбороты.Счет.Код = "90.03"
			ТОГДА БюджетныйОбороты.Субконто3
	КОНЕЦ КАК Контрагент,
	БюджетныйОбороты.ПодразделениеКор КАК ПодразделениеКор,
	НЕОПРЕДЕЛЕНО КАК Субконто3,
	БюджетныйОбороты.Регистратор КАК Регистратор
ПОМЕСТИТЬ Данные
ИЗ
	РегистрБухгалтерии.Учетный.Обороты(
			&amp;ДатаНач,
			&amp;ДатаКон,
			Регистратор,
			Счет.Родитель.Код = "90"
				ИЛИ Счет.Код = "91",
			,
			СценарийПлана В (&amp;Сценарий1),
			НЕ КорСчет.Код = "99",
			) КАК БюджетныйОбороты
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Б_ПлановыеКурсыВалют.СрезПоследних(
				&amp;ДатаКурсаБюджСц1 {(&amp;ДатаКурсаБюджСц1)},
				Сценарий = &amp;Сценарий1
					И Валюта2 = &amp;ЭквивалентнаяВалюта) КАК Б_ПлановыеКурсыВалютСрезПоследних1
		ПО БюджетныйОбороты.Предприятия.ОсновнаяВалютаУчета = Б_ПлановыеКурсыВалютСрезПоследних1.Валюта1
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Б_ПлановыеКурсыВалют.СрезПоследних(
				&amp;ДатаКурсаБюджСц2 {(&amp;ДатаКурсаБюджСц2)},
				Сценарий = &amp;Сценарий2
					И Валюта2 = &amp;ЭквивалентнаяВалюта) КАК Б_ПлановыеКурсыВалютСрезПоследних2
		ПО БюджетныйОбороты.Предприятия.ОсновнаяВалютаУчета = Б_ПлановыеКурсыВалютСрезПоследних2.Валюта1
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Б_ПлановыеКурсыВалют.СрезПоследних(
				&amp;ДатаКурсаБюджСц1 {(&amp;ДатаКурсаБюджСц1)},
				Сценарий = &amp;Сценарий1
					И Валюта1 = &amp;ЭквивалентнаяВалюта) КАК ПлановыйКурсЭквивалентнойВалюты1
		ПО БюджетныйОбороты.Предприятия.ОсновнаяВалютаУчета = ПлановыйКурсЭквивалентнойВалюты1.Валюта2
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Б_ПлановыеКурсыВалют.СрезПоследних(
				&amp;ДатаКурсаБюджСц2 {(&amp;ДатаКурсаБюджСц2)},
				Сценарий = &amp;Сценарий2
					И Валюта1 = &amp;ЭквивалентнаяВалюта) КАК ПлановыйКурсЭквивалентнойВалюты2
		ПО БюджетныйОбороты.Предприятия.ОсновнаяВалютаУчета = ПлановыйКурсЭквивалентнойВалюты2.Валюта2

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВЫБОР
		КОГДА &amp;Сводный
			ТОГДА ЗНАЧЕНИЕ(Справочник.Предприятия.ПустаяСсылка)
		ИНАЧЕ УчетныйОбороты.Предприятия
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.Предприятия.УчетПоПодразделениям
			ТОГДА ЕСТЬNULL(УчетныйОбороты.Подразделение, "Основное")
		ИНАЧЕ "Основное"
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.Счет.Код = "91"
			ТОГДА "Прочее"
		ИНАЧЕ УчетныйОбороты.Субконто1
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.Счет.Код = "90.03"
			ТОГДА УчетныйОбороты.Субконто2
		КОГДА УчетныйОбороты.Счет.Код = "91"
			ТОГДА УчетныйОбороты.Субконто1
		КОГДА УчетныйОбороты.Счет.Код = "90.02"
			ТОГДА УчетныйОбороты.Субконто2
		КОГДА УчетныйОбороты.Счет.Код = "90.01"
			ТОГДА "Выручка"
		ИНАЧЕ NULL
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.СценарийПлана В (&amp;Сценарий1)
			ТОГДА -УчетныйОбороты.СуммаОборот
		ИНАЧЕ 0
	КОНЕЦ,
	УчетныйОбороты.СценарийПлана,
	ВЫБОР
		КОГДА &amp;Интервал = "Месяц"
			ТОГДА НАЧАЛОПЕРИОДА(УчетныйОбороты.Период, МЕСЯЦ)
		КОГДА &amp;Интервал = "Квартал"
			ТОГДА НАЧАЛОПЕРИОДА(УчетныйОбороты.Период, КВАРТАЛ)
		ИНАЧЕ НАЧАЛОПЕРИОДА(УчетныйОбороты.Период, ГОД)
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.СценарийПлана В (&amp;Сценарий2)
			ТОГДА ВЫБОР
					КОГДА УчетныйОбороты.Предприятия.ОсновнаяВалютаУчета = &amp;ЭквивалентнаяВалюта
						ТОГДА -УчетныйОбороты.СуммаОборот
					ИНАЧЕ -УчетныйОбороты.СуммаОборот
				КОНЕЦ
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.Счет.Код = "90.01"
				ИЛИ УчетныйОбороты.Счет.Код = "90.03"
					И УчетныйОбороты.КорСчет.Код = "68.01"
			ТОГДА "Выручка от реализации"
		КОГДА УчетныйОбороты.Счет.Код = "90.02"
			ТОГДА "Себестоимость"
		КОГДА УчетныйОбороты.Счет.Код = "90.03"
				И НЕ УчетныйОбороты.КорСчет.Код = "68.01"
			ТОГДА "Расходы"
		КОГДА УчетныйОбороты.Счет.Код = "91"
			ТОГДА "Прочие расходы"
		КОГДА УчетныйОбороты.Счет.Код = "90.04"
			ТОГДА "Реализация материалов"
		КОГДА УчетныйОбороты.Счет.Код = "90.05"
			ТОГДА "Реализация ОС"
	КОНЕЦ,
	УчетныйОбороты.Счет,
	ВЫБОР
		КОГДА УчетныйОбороты.КорСчет.Код = "25"
				ИЛИ УчетныйОбороты.КорСчет.Код = "26"
				ИЛИ УчетныйОбороты.КорСчет.Код = "44"
			ТОГДА "Постоянные расходы (косвенные)"
		ИНАЧЕ ВЫБОР
				КОГДА УчетныйОбороты.Счет.Код = "91"
					ТОГДА "Прочие доходы и расходы"
				ИНАЧЕ "Реализация"
			КОНЕЦ
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.СценарийПлана В (&amp;Сценарий1)
				И УчетныйОбороты.Счет.Код = "90.03"
			ТОГДА -УчетныйОбороты.СуммаОборот
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.СценарийПлана В (&amp;Сценарий2)
				И УчетныйОбороты.Счет.Код = "90.03"
			ТОГДА -УчетныйОбороты.СуммаОборот
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.КорСчет.Код = "25"
				ИЛИ УчетныйОбороты.КорСчет.Код = "26"
				ИЛИ УчетныйОбороты.КорСчет.Код = "44"
			ТОГДА УчетныйОбороты.КорСубконто1
		ИНАЧЕ NULL
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.Счет.Код = "91"
			ТОГДА "Прочее"
		КОГДА УчетныйОбороты.Счет.Код = "90.04"
			ТОГДА "Материалы"
		КОГДА УчетныйОбороты.Счет.Код = "90.05"
			ТОГДА "Основные средства"
		ИНАЧЕ ВЫРАЗИТЬ(УчетныйОбороты.Субконто1 КАК Справочник.Номенклатура).ВидНоменклатуры
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.СценарийПлана В (&amp;Сценарий1)
			ТОГДА -УчетныйОбороты.СуммаОборотДт
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.СценарийПлана В (&amp;Сценарий2)
			ТОГДА -УчетныйОбороты.СуммаОборотДт
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.СценарийПлана В (&amp;Сценарий1)
			ТОГДА -УчетныйОбороты.СуммаОборотКт
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.СценарийПлана В (&amp;Сценарий2)
			ТОГДА -УчетныйОбороты.СуммаОборотКт
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.Счет.Код = "90.02"
				ИЛИ УчетныйОбороты.Счет.Код = "90.01"
			ТОГДА УчетныйОбороты.Субконто2
		КОГДА УчетныйОбороты.Счет.Код = "90.03"
			ТОГДА УчетныйОбороты.Субконто3
	КОНЕЦ,
	УчетныйОбороты.ПодразделениеКор,
	УчетныйОбороты.Субконто3,
	УчетныйОбороты.Регистратор
ИЗ
	РегистрБухгалтерии.Учетный.Обороты(
			&amp;ДатаНач,
			&amp;ДатаКон,
			Регистратор,
			Счет.Родитель.Код = "90"
				ИЛИ Счет.Код = "91",
			,
			СценарийПлана В (&amp;Сценарий2),
			НЕ КорСчет.Код = "99",
			) КАК УчетныйОбороты
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;ДатаКон, ) КАК КурсыВалютСрезПоследних
		ПО УчетныйОбороты.Предприятия.ОсновнаяВалютаУчета = КурсыВалютСрезПоследних.Валюта
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;ДатаКон, Валюта = &amp;ЭквивалентнаяВалюта) КАК КурсЭквивалентнойВалюты
		ПО (УчетныйОбороты.Предприятия.ОсновнаяВалютаУчета = НЕОПРЕДЕЛЕНО)
ГДЕ
	ВЫБОР
			КОГДА УчетныйОбороты.Счет.Код = "90.03"
				ТОГДА (ВЫРАЗИТЬ(УчетныйОбороты.Субконто1 КАК Справочник.Номенклатура)) &lt;&gt; ЗНАЧЕНИЕ(справочник.номенклатура.пустаяссылка)
			ИНАЧЕ ИСТИНА
		КОНЕЦ

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВЫБОР
		КОГДА &amp;Сводный
			ТОГДА ЗНАЧЕНИЕ(Справочник.Предприятия.ПустаяСсылка)
		ИНАЧЕ УчетныйОбороты_25_26_44.Предприятия
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты_25_26_44.Предприятия.УчетПоПодразделениям
			ТОГДА ЕСТЬNULL(УчетныйОбороты_25_26_44.Подразделение, "Основное")
		ИНАЧЕ "Основное"
	КОНЕЦ,
	ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка),
	УчетныйОбороты_25_26_44.Субконто1,
	ВЫБОР
		КОГДА УчетныйОбороты_25_26_44.СценарийПлана В (&amp;Сценарий1)
			ТОГДА -УчетныйОбороты_25_26_44.СуммаОборот
		ИНАЧЕ 0
	КОНЕЦ,
	УчетныйОбороты_25_26_44.СценарийПлана,
	ВЫБОР
		КОГДА &amp;Интервал = "Месяц"
			ТОГДА НАЧАЛОПЕРИОДА(УчетныйОбороты_25_26_44.Период, МЕСЯЦ)
		КОГДА &amp;Интервал = "Квартал"
			ТОГДА НАЧАЛОПЕРИОДА(УчетныйОбороты_25_26_44.Период, КВАРТАЛ)
		ИНАЧЕ НАЧАЛОПЕРИОДА(УчетныйОбороты_25_26_44.Период, ГОД)
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты_25_26_44.СценарийПлана В (&amp;Сценарий2)
			ТОГДА ВЫБОР
					КОГДА УчетныйОбороты_25_26_44.Предприятия.ОсновнаяВалютаУчета = &amp;ЭквивалентнаяВалюта
						ТОГДА -УчетныйОбороты_25_26_44.СуммаОборот
					ИНАЧЕ -УчетныйОбороты_25_26_44.СуммаОборот
				КОНЕЦ
		ИНАЧЕ 0
	КОНЕЦ,
	"Расходы",
	УчетныйОбороты_25_26_44.Счет,
	"Постоянные расходы (косвенные)",
	0,
	0,
	УчетныйОбороты_25_26_44.Субконто1,
	ЗНАЧЕНИЕ(Справочник.ВидыНоменклатуры.ПустаяСсылка),
	ВЫБОР
		КОГДА УчетныйОбороты_25_26_44.СценарийПлана В (&amp;Сценарий1)
			ТОГДА -УчетныйОбороты_25_26_44.СуммаОборотДт
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты_25_26_44.СценарийПлана В (&amp;Сценарий2)
			ТОГДА -УчетныйОбороты_25_26_44.СуммаОборотДт
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты_25_26_44.СценарийПлана В (&amp;Сценарий1)
			ТОГДА -УчетныйОбороты_25_26_44.СуммаОборотКт
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты_25_26_44.СценарийПлана В (&amp;Сценарий2)
			ТОГДА -УчетныйОбороты_25_26_44.СуммаОборотКт
		ИНАЧЕ 0
	КОНЕЦ,
	УчетныйОбороты.Субконто3,
	УчетныйОбороты_25_26_44.ПодразделениеКор,
	УчетныйОбороты.Субконто3,
	УчетныйОбороты_25_26_44.Регистратор
ИЗ
	РегистрБухгалтерии.Учетный.Обороты(
			&amp;ДатаНач,
			&amp;ДатаКон,
			Регистратор,
			Счет.Код = "90.03",
			,
			СценарийПлана В (&amp;Сценарий2)
				И (ВЫРАЗИТЬ(Субконто1 КАК Справочник.Номенклатура)) = ЗНАЧЕНИЕ(справочник.номенклатура.пустаяссылка),
			НЕ КорСчет.Код = "99",
			) КАК УчетныйОбороты
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрБухгалтерии.Учетный.Обороты(
				&amp;ДатаНач,
				&amp;ДатаКон,
				Регистратор,
				Счет.Код = "25"
					ИЛИ Счет.Код = "26"
					ИЛИ Счет.Код = "44",
				,
				СценарийПлана В (&amp;Сценарий2),
				НЕ КорСчет.Код = "90.03",
				) КАК УчетныйОбороты_25_26_44
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;ДатаКон, ) КАК КурсыВалютСрезПоследних
			ПО УчетныйОбороты_25_26_44.Предприятия.ОсновнаяВалютаУчета = КурсыВалютСрезПоследних.Валюта
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;ДатаКон, Валюта = &amp;ЭквивалентнаяВалюта) КАК КурсЭквивалентнойВалюты
			ПО (УчетныйОбороты_25_26_44.Предприятия.ОсновнаяВалютаУчета = НЕОПРЕДЕЛЕНО)
		ПО УчетныйОбороты.Предприятия = УчетныйОбороты_25_26_44.Предприятия
			И (ВЫБОР
				КОГДА УчетныйОбороты.Предприятия.УчетПоПодразделениям
					ТОГДА УчетныйОбороты.Подразделение = УчетныйОбороты_25_26_44.Подразделение
				ИНАЧЕ ИСТИНА
			КОНЕЦ)
			И УчетныйОбороты.Субконто2 = УчетныйОбороты_25_26_44.Субконто1
			И УчетныйОбороты.СценарийПлана = УчетныйОбороты_25_26_44.СценарийПлана
ГДЕ
	(УчетныйОбороты_25_26_44.СуммаОборот &lt;&gt; 0
			ИЛИ УчетныйОбороты_25_26_44.СуммаОборотДт &lt;&gt; 0
			ИЛИ УчетныйОбороты_25_26_44.СуммаОборотКт &lt;&gt; 0)

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВЫБОР
		КОГДА &amp;Сводный
			ТОГДА ЗНАЧЕНИЕ(Справочник.Предприятия.ПустаяСсылка)
		ИНАЧЕ БюджетныйОбороты.Предприятия
	КОНЕЦ,
	ВЫБОР
		КОГДА БюджетныйОбороты.Предприятия.УчетПоПодразделениям
			ТОГДА ЕСТЬNULL(БюджетныйОбороты.Подразделение, "Основное")
		ИНАЧЕ "Основное"
	КОНЕЦ,
	"Транзиты",
	ВЫБОР
		КОГДА 1 = 1
			ТОГДА NULL
		ИНАЧЕ NULL
	КОНЕЦ,
	ВЫБОР
		КОГДА БюджетныйОбороты.СценарийПлана В (&amp;Сценарий1)
			ТОГДА ВЫБОР
					КОГДА БюджетныйОбороты.Предприятия.ОсновнаяВалютаУчета = &amp;ЭквивалентнаяВалюта
							ИЛИ БюджетныйОбороты.Предприятия.ОсновнаяВалютаУчета = ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка)
						ТОГДА -БюджетныйОбороты.СуммаОборот
					ИНАЧЕ -БюджетныйОбороты.СуммаОборот * ЕСТЬNULL(Б_ПлановыеКурсыВалютСрезПоследних1.Курс, 0)
				КОНЕЦ
		ИНАЧЕ 0
	КОНЕЦ,
	БюджетныйОбороты.СценарийПлана,
	ВЫБОР
		КОГДА &amp;Интервал = "Месяц"
			ТОГДА НАЧАЛОПЕРИОДА(БюджетныйОбороты.Период, МЕСЯЦ)
		КОГДА &amp;Интервал = "Квартал"
			ТОГДА НАЧАЛОПЕРИОДА(БюджетныйОбороты.Период, КВАРТАЛ)
		ИНАЧЕ НАЧАЛОПЕРИОДА(БюджетныйОбороты.Период, ГОД)
	КОНЕЦ,
	ВЫБОР
		КОГДА БюджетныйОбороты.СценарийПлана В (&amp;Сценарий2)
			ТОГДА ВЫБОР
					КОГДА БюджетныйОбороты.Предприятия.ОсновнаяВалютаУчета = &amp;ЭквивалентнаяВалюта
						ТОГДА -БюджетныйОбороты.СуммаОборот
					ИНАЧЕ -БюджетныйОбороты.СуммаОборот * ЕСТЬNULL(Б_ПлановыеКурсыВалютСрезПоследних2.Курс, 0)
				КОНЕЦ
		ИНАЧЕ 0
	КОНЕЦ,
	"Транзиты",
	БюджетныйОбороты.Счет,
	"Транзиты",
	0,
	0,
	ВЫБОР
		КОГДА 1 = 1
			ТОГДА NULL
		ИНАЧЕ NULL
	КОНЕЦ,
	"Транзиты",
	ВЫБОР
		КОГДА БюджетныйОбороты.СценарийПлана В (&amp;Сценарий1)
			ТОГДА -БюджетныйОбороты.СуммаОборотДт * ЕСТЬNULL(Б_ПлановыеКурсыВалютСрезПоследних1.Курс, 1)
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА БюджетныйОбороты.СценарийПлана В (&amp;Сценарий2)
			ТОГДА -БюджетныйОбороты.СуммаОборотДт * ЕСТЬNULL(Б_ПлановыеКурсыВалютСрезПоследних2.Курс, 1)
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА БюджетныйОбороты.СценарийПлана В (&amp;Сценарий1)
			ТОГДА -БюджетныйОбороты.СуммаОборотКт * ЕСТЬNULL(Б_ПлановыеКурсыВалютСрезПоследних1.Курс, 1)
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА БюджетныйОбороты.СценарийПлана В (&amp;Сценарий2)
			ТОГДА -БюджетныйОбороты.СуммаОборотКт * ЕСТЬNULL(Б_ПлановыеКурсыВалютСрезПоследних2.Курс, 1)
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА БюджетныйОбороты.Счет.Код = "90.02"
				ИЛИ БюджетныйОбороты.Счет.Код = "90.01"
			ТОГДА БюджетныйОбороты.Субконто2
		КОГДА БюджетныйОбороты.Счет.Код = "90.03"
			ТОГДА БюджетныйОбороты.Субконто3
	КОНЕЦ,
	БюджетныйОбороты.ПодразделениеКор,
	NULL,
	БюджетныйОбороты.Регистратор
ИЗ
	РегистрБухгалтерии.Учетный.Обороты(
			&amp;ДатаНач,
			&amp;ДатаКон,
			Регистратор,
			Счет.Код = "99",
			,
			СценарийПлана В (&amp;Сценарий1)
				И &amp;ОтражатьИзменениеЧА = ИСТИНА,
			НЕ КорСчет.Родитель.Код = "90"
				И НЕ КорСчет.Код = "91",
			) КАК БюджетныйОбороты
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Б_ПлановыеКурсыВалют.СрезПоследних(
				&amp;ДатаКурсаБюджСц1 {(&amp;ДатаКурсаБюджСц1)},
				Сценарий = &amp;Сценарий1
					И Валюта2 = &amp;ЭквивалентнаяВалюта) КАК Б_ПлановыеКурсыВалютСрезПоследних1
		ПО БюджетныйОбороты.Предприятия.ОсновнаяВалютаУчета = Б_ПлановыеКурсыВалютСрезПоследних1.Валюта1
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Б_ПлановыеКурсыВалют.СрезПоследних(
				&amp;ДатаКурсаБюджСц2 {(&amp;ДатаКурсаБюджСц2)},
				Сценарий = &amp;Сценарий2
					И Валюта2 = &amp;ЭквивалентнаяВалюта) КАК Б_ПлановыеКурсыВалютСрезПоследних2
		ПО БюджетныйОбороты.Предприятия.ОсновнаяВалютаУчета = Б_ПлановыеКурсыВалютСрезПоследних2.Валюта1
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Б_ПлановыеКурсыВалют.СрезПоследних({(&amp;ДатаКурсаБюджСц1)}, ) КАК ПлановыйКурсЭквивалентнойВалюты1
		ПО БюджетныйОбороты.Предприятия.ОсновнаяВалютаУчета = ПлановыйКурсЭквивалентнойВалюты1.Валюта2
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Б_ПлановыеКурсыВалют.СрезПоследних({(&amp;ДатаКурсаБюджСц2)}, ) КАК ПлановыйКурсЭквивалентнойВалюты2
		ПО БюджетныйОбороты.Предприятия.ОсновнаяВалютаУчета = ПлановыйКурсЭквивалентнойВалюты2.Валюта2

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВЫБОР
		КОГДА &amp;Сводный
			ТОГДА ЗНАЧЕНИЕ(Справочник.Предприятия.ПустаяСсылка)
		ИНАЧЕ УчетныйОбороты.Предприятия
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.Предприятия.УчетПоПодразделениям
			ТОГДА ЕСТЬNULL(УчетныйОбороты.Подразделение, "Основное")
		ИНАЧЕ "Основное"
	КОНЕЦ,
	"Транзиты",
	ВЫБОР
		КОГДА 1 = 1
			ТОГДА NULL
		ИНАЧЕ NULL
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.СценарийПлана В (&amp;Сценарий1)
			ТОГДА -УчетныйОбороты.СуммаОборот
		ИНАЧЕ 0
	КОНЕЦ,
	УчетныйОбороты.СценарийПлана,
	ВЫБОР
		КОГДА &amp;Интервал = "Месяц"
			ТОГДА НАЧАЛОПЕРИОДА(УчетныйОбороты.Период, МЕСЯЦ)
		КОГДА &amp;Интервал = "Квартал"
			ТОГДА НАЧАЛОПЕРИОДА(УчетныйОбороты.Период, КВАРТАЛ)
		ИНАЧЕ НАЧАЛОПЕРИОДА(УчетныйОбороты.Период, ГОД)
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.СценарийПлана В (&amp;Сценарий2)
			ТОГДА -УчетныйОбороты.СуммаОборот
		ИНАЧЕ 0
	КОНЕЦ,
	"Транзиты",
	УчетныйОбороты.Счет,
	"Транзиты",
	0,
	0,
	ВЫБОР
		КОГДА 1 = 1
			ТОГДА NULL
		ИНАЧЕ NULL
	КОНЕЦ,
	"Транзиты",
	ВЫБОР
		КОГДА УчетныйОбороты.СценарийПлана В (&amp;Сценарий1)
			ТОГДА -УчетныйОбороты.СуммаОборотДт
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.СценарийПлана В (&amp;Сценарий2)
			ТОГДА -УчетныйОбороты.СуммаОборотДт
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.СценарийПлана В (&amp;Сценарий1)
			ТОГДА -УчетныйОбороты.СуммаОборотКт
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.СценарийПлана В (&amp;Сценарий2)
			ТОГДА -УчетныйОбороты.СуммаОборотКт
		ИНАЧЕ 0
	КОНЕЦ,
	ВЫБОР
		КОГДА УчетныйОбороты.Счет.Код = "90.02"
				ИЛИ УчетныйОбороты.Счет.Код = "90.01"
			ТОГДА УчетныйОбороты.Субконто2
		КОГДА УчетныйОбороты.Счет.Код = "90.03"
			ТОГДА УчетныйОбороты.Субконто3
	КОНЕЦ,
	УчетныйОбороты.ПодразделениеКор,
	ВЫБОР
		КОГДА 1 = 1
			ТОГДА NULL
		ИНАЧЕ NULL
	КОНЕЦ,
	УчетныйОбороты.Регистратор
ИЗ
	РегистрБухгалтерии.Учетный.Обороты(
			&amp;ДатаНач,
			&amp;ДатаКон,
			Регистратор,
			Счет.Код = "99",
			,
			СценарийПлана В (&amp;Сценарий1)
				И &amp;ОтражатьИзменениеЧА = ИСТИНА,
			НЕ КорСчет.Родитель.Код = "90"
				И НЕ КорСчет.Код = "91",
			) КАК УчетныйОбороты
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;ДатаКон, ) КАК КурсыВалютСрезПоследних
		ПО УчетныйОбороты.Предприятия.ОсновнаяВалютаУчета = КурсыВалютСрезПоследних.Валюта
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&amp;ДатаКон, Валюта = &amp;ЭквивалентнаяВалюта) КАК КурсЭквивалентнойВалюты
		ПО (УчетныйОбороты.Предприятия.ОсновнаяВалютаУчета = НЕОПРЕДЕЛЕНО)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	Данные.Предприятия КАК Предприятия,
	Данные.Подразделение КАК Подразделение,
	Данные.Номенклатура КАК Номенклатура,
	Данные.КоммерческаяСтатья КАК СтатьяЗатрат,
	Данные.План КАК План,
	Данные.СценарийПлана КАК СценарийПлана,
	Данные.Период КАК Период,
	Данные.Факт КАК Факт,
	Данные.Статья КАК Статья,
	Данные.Счет КАК Счет,
	Данные.Порядок КАК Порядок,
	Данные.ПланЧистаяЦена КАК ПланЧистаяЦена,
	Данные.ФактЧистаяЦена КАК ФактЧистаяЦена,
	Данные.Статья25счета КАК Статья25счета,
	Данные.ТипНоменклатуры КАК ТипНоменклатуры,
	Данные.Контрагент КАК Контрагент,
	Данные.ПодразделениеКор КАК ПодразделениеКор,
	Данные.Субконто3 КАК Субконто3,
	Данные.Регистратор КАК Регистратор
ИЗ
	Данные КАК Данные
ГДЕ
	НЕ Данные.Статья = "Реализация ОС"
	И НЕ Данные.Статья = "Реализация материалов"

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	Данные.Предприятия,
	Данные.Подразделение,
	Данные.Номенклатура,
	Данные.КоммерческаяСтатья,
	-Данные.ПланКт,
	Данные.СценарийПлана,
	Данные.Период,
	-Данные.ФактКт,
	"Выручка от реализации",
	Данные.Счет,
	Данные.Порядок,
	Данные.ПланЧистаяЦена,
	Данные.ФактЧистаяЦена,
	Данные.Статья25счета,
	Данные.ТипНоменклатуры,
	Данные.Контрагент,
	Данные.ПодразделениеКор,
	Данные.Субконто3,
	Данные.Регистратор
ИЗ
	Данные КАК Данные
ГДЕ
	(Данные.Статья = "Реализация ОС"
			ИЛИ Данные.Статья = "Реализация материалов")

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	Данные.Предприятия,
	Данные.Подразделение,
	Данные.Номенклатура,
	Данные.КоммерческаяСтатья,
	Данные.ПланДт,
	Данные.СценарийПлана,
	Данные.Период,
	Данные.ФактДт,
	"Себестоимость",
	Данные.Счет,
	Данные.Порядок,
	Данные.ПланЧистаяЦена,
	Данные.ФактЧистаяЦена,
	Данные.Статья25счета,
	Данные.ТипНоменклатуры,
	Данные.Контрагент,
	Данные.ПодразделениеКор,
	Данные.Субконто3,
	Данные.Регистратор
ИЗ
	Данные КАК Данные
ГДЕ
	(Данные.Статья = "Реализация ОС"
			ИЛИ Данные.Статья = "Реализация материалов")

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	Данные.Предприятия,
	Данные.Подразделение,
	Данные.Номенклатура,
	Данные.КоммерческаяСтатья,
	-Данные.План,
	Данные.СценарийПлана,
	Данные.Период,
	-Данные.Факт,
	Данные.Статья,
	Данные.Счет,
	NULL,
	0,
	0,
	Данные.Статья25счета,
	Данные.ТипНоменклатуры,
	Данные.Контрагент,
	Данные.ПодразделениеКор,
	Данные.Субконто3,
	Данные.Регистратор
ИЗ
	Данные КАК Данные
ГДЕ
	Данные.Порядок = "Транзиты"

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	Данные.Предприятия,
	Данные.Подразделение,
	Данные.Номенклатура,
	Данные.КоммерческаяСтатья,
	0,
	Данные.СценарийПлана,
	Данные.Период,
	0,
	Данные.Статья,
	Данные.Счет,
	NULL,
	0,
	0,
	Данные.Статья25счета,
	Данные.ТипНоменклатуры,
	Данные.Контрагент,
	Данные.ПодразделениеКор,
	Данные.Субконто3,
	Данные.Регистратор
ИЗ
	Данные КАК Данные
ГДЕ
	Данные.Порядок = "Транзиты"

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	Данные.Предприятия,
	Данные.Подразделение,
	NULL,
	NULL,
	0,
	Данные.СценарийПлана,
	Данные.Период,
	0,
	Данные.Статья,
	Данные.Счет,
	"Транзиты",
	0,
	0,
	NULL,
	"Транзиты",
	Данные.Контрагент,
	Данные.ПодразделениеКор,
	Данные.Субконто3,
	Данные.Регистратор
ИЗ
	Данные КАК Данные
ГДЕ
	НЕ Данные.Статья = "Реализация ОС"
	И НЕ Данные.Статья = "Реализация материалов"
	И &amp;ОтражатьИзменениеЧА = ИСТИНА

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	Данные.Предприятия,
	Данные.Подразделение,
	NULL,
	NULL,
	-Данные.План,
	Данные.СценарийПлана,
	Данные.Период,
	-Данные.Факт,
	NULL,
	Данные.Счет,
	"Изменение чистых активов",
	0,
	0,
	NULL,
	"Изменение чистых активов",
	Данные.Контрагент,
	Данные.ПодразделениеКор,
	NULL,
	Данные.Регистратор
ИЗ
	Данные КАК Данные
ГДЕ
	НЕ Данные.Порядок = "Транзиты"
	И &amp;ОтражатьИзменениеЧА = ИСТИНА

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	Данные.Предприятия,
	Данные.Подразделение,
	NULL,
	NULL,
	-Данные.План,
	Данные.СценарийПлана,
	Данные.Период,
	-Данные.Факт,
	NULL,
	Данные.Счет,
	"Изменение чистых активов",
	0,
	0,
	NULL,
	"Изменение чистых активов",
	Данные.Контрагент,
	Данные.ПодразделениеКор,
	NULL,
	Данные.Регистратор
ИЗ
	Данные КАК Данные
ГДЕ
	Данные.Порядок = "Транзиты"
	И &amp;ОтражатьИзменениеЧА = ИСТИНА

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	Данные.Предприятия,
	Данные.Подразделение,
	NULL,
	NULL,
	Данные.План,
	Данные.СценарийПлана,
	Данные.Период,
	Данные.Факт,
	NULL,
	Данные.Счет,
	NULL,
	0,
	0,
	NULL,
	"Изменение чистых активов",
	Данные.Контрагент,
	Данные.ПодразделениеКор,
	NULL,
	Данные.Регистратор
ИЗ
	Данные КАК Данные
ГДЕ
	&amp;ОтражатьИзменениеЧА = ИСТИНА</query>
	</dataSet>
	<totalField>
		<dataPath>План</dataPath>
		<expression>Сумма(План)</expression>
	</totalField>
	<totalField>
		<dataPath>Факт</dataPath>
		<expression>Сумма(Факт)</expression>
	</totalField>
	<parameter>
		<name>Сценарий1</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Сценарий1</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.СценарииПланирования</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>Сценарий2</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Сценарий2</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.СценарииПланирования</v8:Type>
		</valueType>
		<value xsi:type="dcscor:DesignTimeValue">Справочник.СценарииПланирования.ПустаяСсылка</value>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;ВыбПериод.ДатаОкончания</expression>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>ВыбПериод</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>v8:StandardPeriod</v8:Type>
		</valueType>
		<value xsi:type="v8:StandardPeriod">
			<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
			<v8:startDate>0001-01-01T00:00:00</v8:startDate>
			<v8:endDate>0001-01-01T00:00:00</v8:endDate>
		</value>
		<useRestriction>false</useRestriction>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>НачалоПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Начало периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;ВыбПериод.ДатаНачала</expression>
	</parameter>
	<parameter>
		<name>КонецПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;ВыбПериод.ДатаОкончания</expression>
	</parameter>
	<parameter>
		<name>Интервал</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Интервал</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:string</v8:Type>
			<v8:StringQualifiers>
				<v8:Length>0</v8:Length>
				<v8:AllowedLength>Variable</v8:AllowedLength>
			</v8:StringQualifiers>
		</valueType>
		<value xsi:type="xs:string"/>
		<useRestriction>false</useRestriction>
		<availableValue>
			<value xsi:type="xs:string">Месяц</value>
			<presentation xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Месяц</v8:content>
				</v8:item>
			</presentation>
		</availableValue>
		<availableValue>
			<value xsi:type="xs:string">Квартал</value>
			<presentation xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Квартал</v8:content>
				</v8:item>
			</presentation>
		</availableValue>
		<availableValue>
			<value xsi:type="xs:string">Год</value>
			<presentation xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Год</v8:content>
				</v8:item>
			</presentation>
		</availableValue>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>Сводный</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Группировать предприятия</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>false</useRestriction>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>ЭквивалентнаяВалюта</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Эквивалентная валюта</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.Валюты</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>ДатаКон</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата кон</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;ВыбПериод.ДатаОкончания</expression>
	</parameter>
	<parameter>
		<name>ДатаКурсаБюджСц1</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата курса бюдж сц1</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;ВыбПериод.ДатаОкончания</expression>
	</parameter>
	<parameter>
		<name>ДатаКурсаБюджСц2</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата курса бюдж сц2</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;ВыбПериод.ДатаОкончания</expression>
	</parameter>
	<parameter>
		<name>ДатаНач</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата нач</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;ВыбПериод.ДатаНачала</expression>
	</parameter>
	<parameter>
		<name>ОтражатьИзменениеЧА</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Отражать изменение ЧА</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="xs:string">Основной</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Период</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Регистратор</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Предприятия</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Подразделение</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Номенклатура</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Счет</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Статья</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СтатьяЗатрат</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Контрагент</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СценарийПлана</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>План</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Факт</dcsset:field>
				</dcsset:item>
				<dcsset:userSettingID>21c8a11b-79ad-4ae7-bc42-e30feec8ff7a</dcsset:userSettingID>
				<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Выбранные поля</v8:content>
					</v8:item>
				</dcsset:userSettingPresentation>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:userSettingID>98db00d4-4dd8-4c95-a798-bf4db081913f</dcsset:userSettingID>
				<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Отбор</v8:content>
					</v8:item>
				</dcsset:userSettingPresentation>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Сценарий1</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:DesignTimeValue">Справочник.СценарииПланирования.ПустаяСсылка</dcscor:value>
					<dcsset:userSettingID>2f528eb2-e1a2-43ad-9e4a-8f732e003a73</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Сценарий2</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:DesignTimeValue">Справочник.СценарииПланирования.ПустаяСсылка</dcscor:value>
					<dcsset:userSettingID>27def85d-28d0-403d-96ba-86ad6d87117b</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыбПериод</dcscor:parameter>
					<dcscor:value xsi:type="xs:dateTime">0001-01-01T00:00:00</dcscor:value>
					<dcsset:userSettingID>a52d60ea-5d84-4d77-a473-fef1eaf0bce9</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Интервал</dcscor:parameter>
					<dcscor:value xsi:type="xs:string"/>
					<dcsset:userSettingID>cc55174f-6525-4a2f-89b9-96ff3b8b20da</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ЭквивалентнаяВалюта</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:order>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>Период</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
				<dcsset:userSettingID>aad79427-47e7-482f-9a1c-ae185b8e714f</dcsset:userSettingID>
				<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Порядок</v8:content>
					</v8:item>
				</dcsset:userSettingPresentation>
			</dcsset:order>
			<dcsset:conditionalAppearance>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>Регистратор</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter/>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>Размещение</dcscor:parameter>
							<dcscor:value xsi:type="dcscor:DataCompositionTextPlacementType">Wrap</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
							<dcscor:value xsi:type="xs:decimal">30</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>СтатьяЗатрат</dcsset:field>
						</dcsset:item>
						<dcsset:item>
							<dcsset:field>Контрагент</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter/>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>Размещение</dcscor:parameter>
							<dcscor:value xsi:type="dcscor:DataCompositionTextPlacementType">Wrap</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>МаксимальнаяШирина</dcscor:parameter>
							<dcscor:value xsi:type="xs:decimal">25</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
			</dcsset:conditionalAppearance>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
			</dcsset:item>
			<dcsset:itemsUserSettingID>4791ee5d-cb7e-4f84-a938-be8d3f193ed8</dcsset:itemsUserSettingID>
			<dcsset:itemsUserSettingPresentation xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Группировки</v8:content>
				</v8:item>
			</dcsset:itemsUserSettingPresentation>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>