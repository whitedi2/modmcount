
&НаСервере
&Вместо("ИмяФайлаНаСервереИлиКлиенте")
Функция УУ_ИмяФайлаНаСервереИлиКлиенте(ИмяРеквизита, Знач АдресФайла, Знач ИмяФайлаДляРасширения, СоздатьНовый, ПроверятьСуществование)
	СоздатьНовый = Ложь, ПроверятьСуществование = Истина)
	
	ИмяФайла = Неопределено;
	
	Если ЭтоКлиент Тогда
		
		Если СоздатьНовый Тогда
			
			Расширение = ? (Объект.АрхивироватьФайл, ".zip", ".xml");
			
			ИмяФайла = ПолучитьИмяВременногоФайла(Расширение);
			
		Иначе
			
			Расширение = РасширениеФайла(ИмяФайлаДляРасширения);
			ДвоичныеДанные = ПолучитьИзВременногоХранилища(АдресФайла); // ДвоичныеДанные
			АдресНаСервере = ПолучитьИмяВременногоФайла(Расширение);
			// Удаление временного файла происходит не через УдалитьФайлы(АдресНаСервере),
			// а через УдалитьФайлы(Объект.ИмяФайлаПравилОбмена) и УдалитьФайлы(Объект.ИмяФайлаОбмена) далее.
			ДвоичныеДанные.Записать(АдресНаСервере);
			ИмяФайла = АдресНаСервере;
			
		КонецЕсли;
		
	Иначе
		
		//ФайлНаСервере = Новый Файл(ИмяРеквизита);
		//
		//Если Не ФайлНаСервере.Существует() И ПроверятьСуществование Тогда
		//	
		//	СообщитьПользователю(НСтр("ru = 'Указанный файл не существует.'"));
		//	
		//Иначе
		
		ИмяФайла = ИмяРеквизита;
		
		//КонецЕсли;
		
	КонецЕсли;
	
	Возврат ИмяФайла;
КонецФункции
