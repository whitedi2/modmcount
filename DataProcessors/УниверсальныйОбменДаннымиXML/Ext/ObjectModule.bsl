
&Вместо("ЗагрузитьПравилаОбмена")
Процедура УУ_ЗагрузитьПравилаОбмена(Источник, ТипИсточника)
	ИнициализироватьМенеджерыИСообщения();
	
	ЕстьГлобальныйОбработчикПередВыгрузкойОбъекта    = Ложь;
	ЕстьГлобальныйОбработчикПослеВыгрузкиОбъекта     = Ложь;
	
	ЕстьГлобальныйОбработчикПередКонвертациейОбъекта = Ложь;

	ЕстьГлобальныйОбработчикПередЗагрузкойОбъекта    = Ложь;
	ЕстьГлобальныйОбработчикПослеЗагрузкиОбъекта     = Ложь;
	
	СоздатьСтруктуруКонвертации();
	
	мТаблицаПравилКонвертацииСвойств = Новый ТаблицаЗначений;
	ИнициализацияТаблицыПравилКонвертацииСвойств(мТаблицаПравилКонвертацииСвойств);
	ДополнитьСлужебныеТаблицыКолонками();
	
	// Возможно выбраны встроенные правила обмена (один из макетов).
	
	ИмяВременногоФайлаПравилОбмена = "";
	Если ПустаяСтрока(Источник) Тогда
		
		Источник = ИмяФайлаПравилОбмена;
		
		Если СтрНайти(Источник, "ftp") Тогда //вставка Белых
			
			АдресСайта = "s3.sab2up.ru" ;
			Порт = 21;
			Логин = "";
			Пароль = "";
			ИмяКаталога = "/Exch";
			FTPСоединение = Новый FTPСоединение(АдресСайта,Порт,Логин,Пароль);
			FTPСоединение.УстановитьТекущийКаталог(ИмяКаталога);
			
			ВременныйФайл = ПолучитьИмяВременногоФайла("txt");
			FTPСоединение.Получить("ПОД_БП_БП_САБ_3.0.135.22.xml",ВременныйФайл);
			
			Источник = ВременныйФайл;
			
		Иначе
			
			Если мСписокМакетовПравилОбмена.НайтиПоЗначению(Источник) <> Неопределено Тогда
				Для каждого Макет Из Метаданные().Макеты Цикл
					Если Макет.Синоним = Источник Тогда
						Источник = Макет.Имя;
						Прервать;
					КонецЕсли; 
				КонецЦикла; 
				МакетПравилОбмена              = ПолучитьМакет(Источник);
				ИмяВременногоФайлаПравилОбмена = ПолучитьИмяВременногоФайла("xml");
				МакетПравилОбмена.Записать(ИмяВременногоФайлаПравилОбмена);
				Источник = ИмяВременногоФайлаПравилОбмена;
			КонецЕсли;
			
		КонецЕсли;
		
		
	КонецЕсли;
	
	ПродолжитьВызов(Источник, ТипИсточника);
КонецПроцедуры
