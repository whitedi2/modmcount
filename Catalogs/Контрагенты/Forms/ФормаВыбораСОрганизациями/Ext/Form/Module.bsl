
&НаКлиенте
Процедура СписокПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа)
	//Если БюджетныйНаСервере.РольДоступнаСервер("РасчетныйОтдел") Тогда
	//	Отказ = Истина;
	//	ЗначениеСтроки = "";
	//	Если ВвестиСтроку(ЗначениеСтроки, "Введите наименование контрагента") Тогда
	//		СтруктураЗапроса = БюджетныйНаСервере.НайтиПодобныеЭлементыСправочника(ЗначениеСтроки);
	//		Если НЕ СтруктураЗапроса = Ложь Тогда
	//			//Отказ = Истина;
	//			Если Вопрос("Найдены похожие контрагенты в общем справочнике. Желаете выбрать нужного контрагента из найденных?", РежимДиалогаВопрос.ДаНет) = КодВозвратаДиалога.Да  Тогда
	//				ТекКонтрагент = ОткрытьФормуМодально("Справочник.Контрагенты.Форма.ФормаВыбораПолная", СтруктураЗапроса);
	//				Если Не ТекКонтрагент = Неопределено Тогда
	//					ОткрытьЗначение(ТекКонтрагент);					
	//				КонецЕсли;
	//			Иначе
	//				ТекФорма = ПолучитьФорму("Справочник.Контрагенты.ФормаОбъекта");
	//				ТекФорма.Объект.Наименование = ЗначениеСтроки;
	//				ТекФорма.Открыть();
	//			КонецЕсли;
	//		Иначе
	//			ТекФорма = ПолучитьФорму("Справочник.Контрагенты.ФормаОбъекта");
	//			ТекФорма.Объект.Наименование = ЗначениеСтроки;
	//			ТекФорма.Открыть();
	//		КонецЕсли;
	//	КонецЕсли;
	//КонецЕсли;	
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Элементы.Список.РежимВыбора = Параметры.РежимВыбора;
	Элементы.СписокВыбрать.Видимость = Параметры.РежимВыбора;
	сабДоступностьКонтрагентовПоПредприятиям = Ложь;
КонецПроцедуры

&НаКлиенте
Процедура СписокВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	СтандартнаяОбработка = Ложь;
	ЭтаФорма.ОповеститьОВыборе(Элементы.Список.ДанныеСтроки(Элементы.Список.ТекущаяСтрока).Ссылка);
	//Если Элементы.Список.РежимВыбора Тогда
	//	Если Не Элементы.Список.ТекущиеДанные = Неопределено Тогда
	//		Если ИмяПеречисления(Элементы.Список.ТекущиеДанные.СтатусПроверки) = "На проверке" Или ИмяПеречисления(Элементы.Список.ТекущиеДанные.СтатусПроверки) = "Проверка нового" Тогда
	//			Если Вопрос("Данный контрагент не проверен. Продолжить?", РежимДиалогаВопрос.ДаНет) = КодВозвратаДиалога.Нет Тогда
	//				СтандартнаяОбработка = Ложь;
	//			КонецЕсли;
	//		ИначеЕсли ИмяПеречисления(Элементы.Список.ТекущиеДанные.СтатусПроверки) = "Отклонен" Тогда
	//			Сообщение = Новый СообщениеПользователю;
	//			Сообщение.Текст = "Данный контрагент отклонен, его использование невозможно!";
	//			Сообщение.Сообщить();
	//			СтандартнаяОбработка = Ложь;
	//		КонецЕсли;
	//	КонецЕсли;	
	//КонецЕсли;
	
КонецПроцедуры

&НаСервере
Функция ИмяПеречисления(ТекПеречисление)
	
	Возврат Строка(ТекПеречисление);
	
КонецФункции	

&НаКлиенте
Процедура Выбрать(Команда)

	Если НЕ Элементы.Список.ТекущиеДанные = Неопределено И Не Элементы.Список.ТекущиеДанные.Проверен Тогда
		Если Вопрос("Данный контрагент не проверен. Продолжить?", РежимДиалогаВопрос.ДаНет) = КодВозвратаДиалога.Да Тогда
			ЭтаФорма.ОповеститьОВыборе(Элементы.Список.ДанныеСтроки(Элементы.Список.ТекущаяСтрока).Ссылка);
		КонецЕсли;
	Иначе
		ЭтаФорма.ОповеститьОВыборе(Элементы.Список.ДанныеСтроки(Элементы.Список.ТекущаяСтрока).Ссылка);
	КонецЕсли;	
	
КонецПроцедуры

&НаКлиенте
Процедура Создать(Команда)
	ОткрытьФорму("Справочник.Контрагенты.ФормаОбъекта");
КонецПроцедуры

&НаКлиенте
Процедура Скопировать(Команда)
	ОткрытьФорму("Справочник.Контрагенты.ФормаОбъекта", Новый Структура("ЗначениеКопирования", Элементы.Список.ДанныеСтроки(Элементы.Список.ТекущаяСтрока).Ссылка));
КонецПроцедуры
