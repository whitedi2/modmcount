<?xml version="1.0" encoding="UTF-8"?>
<Form xmlns="http://v8.1c.ru/8.3/xcf/logform" xmlns:app="http://v8.1c.ru/8.2/managed-application/core" xmlns:cfg="http://v8.1c.ru/8.1/data/enterprise/current-config" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:ent="http://v8.1c.ru/8.1/data/enterprise" xmlns:lf="http://v8.1c.ru/8.2/managed-application/logform" xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows" xmlns:xr="http://v8.1c.ru/8.3/xcf/readable" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.14">
	<VerticalScroll>useIfNecessary</VerticalScroll>
	<AutoCommandBar name="ФормаКоманднаяПанель" id="-1"/>
	<Events>
		<Event name="OnCreateAtServer">ПриСозданииНаСервере</Event>
	</Events>
	<ChildItems>
		<Table name="Список" id="1">
			<Representation>List</Representation>
			<CommandBarLocation>None</CommandBarLocation>
			<DefaultItem>true</DefaultItem>
			<UseAlternationRowColor>true</UseAlternationRowColor>
			<InitialListView>End</InitialListView>
			<InitialTreeView>ExpandTopLevel</InitialTreeView>
			<EnableStartDrag>true</EnableStartDrag>
			<FileDragMode>AsFile</FileDragMode>
			<DataPath>Список</DataPath>
			<RowPictureDataPath>Список.DefaultPicture</RowPictureDataPath>
			<SearchStringLocation>None</SearchStringLocation>
			<ViewStatusLocation>None</ViewStatusLocation>
			<SearchControlLocation>None</SearchControlLocation>
			<AutoRefresh>false</AutoRefresh>
			<AutoRefreshPeriod>60</AutoRefreshPeriod>
			<Period>
				<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
				<v8:startDate>0001-01-01T00:00:00</v8:startDate>
				<v8:endDate>0001-01-01T00:00:00</v8:endDate>
			</Period>
			<ChoiceFoldersAndItems>Items</ChoiceFoldersAndItems>
			<RestoreCurrentRow>false</RestoreCurrentRow>
			<TopLevelParent xsi:nil="true"/>
			<ShowRoot>true</ShowRoot>
			<AllowRootChoice>false</AllowRootChoice>
			<UpdateOnDataChange>Auto</UpdateOnDataChange>
			<AllowGettingCurrentRowURL>true</AllowGettingCurrentRowURL>
			<ContextMenu name="СписокКонтекстноеМеню" id="2"/>
			<AutoCommandBar name="СписокКоманднаяПанель" id="3">
				<Autofill>false</Autofill>
			</AutoCommandBar>
			<ExtendedTooltip name="СписокРасширеннаяПодсказка" id="35"/>
			<SearchStringAddition name="СписокСтрокаПоиска" id="36">
				<AdditionSource>
					<Item>Список</Item>
					<Type>SearchStringRepresentation</Type>
				</AdditionSource>
				<ContextMenu name="СписокСтрокаПоискаКонтекстноеМеню" id="37"/>
				<ExtendedTooltip name="СписокСтрокаПоискаРасширеннаяПодсказка" id="38"/>
			</SearchStringAddition>
			<ViewStatusAddition name="СписокСостояниеПросмотра" id="39">
				<AdditionSource>
					<Item>Список</Item>
					<Type>ViewStatusRepresentation</Type>
				</AdditionSource>
				<ContextMenu name="СписокСостояниеПросмотраКонтекстноеМеню" id="40"/>
				<ExtendedTooltip name="СписокСостояниеПросмотраРасширеннаяПодсказка" id="41"/>
			</ViewStatusAddition>
			<SearchControlAddition name="СписокУправлениеПоиском" id="42">
				<AdditionSource>
					<Item>Список</Item>
					<Type>SearchControl</Type>
				</AdditionSource>
				<ContextMenu name="СписокУправлениеПоискомКонтекстноеМеню" id="43"/>
				<ExtendedTooltip name="СписокУправлениеПоискомРасширеннаяПодсказка" id="44"/>
			</SearchControlAddition>
			<ChildItems>
				<LabelField name="Наименование" id="4">
					<DataPath>Список.Код</DataPath>
					<DefaultItem>true</DefaultItem>
					<Title>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Номер</v8:content>
						</v8:item>
					</Title>
					<ContextMenu name="НаименованиеКонтекстноеМеню" id="5"/>
					<ExtendedTooltip name="НаименованиеРасширеннаяПодсказка" id="45"/>
				</LabelField>
				<LabelField name="Пользователь" id="12">
					<DataPath>Список.Пользователь</DataPath>
					<Title>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Отпускник</v8:content>
						</v8:item>
					</Title>
					<ContextMenu name="ПользовательКонтекстноеМеню" id="13"/>
					<ExtendedTooltip name="ПользовательРасширеннаяПодсказка" id="46"/>
				</LabelField>
				<LabelField name="Замещающий" id="14">
					<DataPath>Список.Замещающий</DataPath>
					<ContextMenu name="ЗамещающийКонтекстноеМеню" id="15"/>
					<ExtendedTooltip name="ЗамещающийРасширеннаяПодсказка" id="47"/>
				</LabelField>
				<LabelField name="ДатаНачала" id="8">
					<DataPath>Список.ДатаНачала</DataPath>
					<ContextMenu name="ДатаНачалаКонтекстноеМеню" id="9"/>
					<ExtendedTooltip name="ДатаНачалаРасширеннаяПодсказка" id="48"/>
				</LabelField>
				<LabelField name="ДатаОкончания" id="10">
					<DataPath>Список.ДатаОкончания</DataPath>
					<ContextMenu name="ДатаОкончанияКонтекстноеМеню" id="11"/>
					<ExtendedTooltip name="ДатаОкончанияРасширеннаяПодсказка" id="49"/>
				</LabelField>
				<LabelField name="Примечания" id="31">
					<DataPath>Список.Примечания</DataPath>
					<ContextMenu name="ПримечанияКонтекстноеМеню" id="32"/>
					<ExtendedTooltip name="ПримечанияРасширеннаяПодсказка" id="50"/>
				</LabelField>
				<LabelField name="КомментарийЗамещающего" id="33">
					<DataPath>Список.КомментарийЗамещающего</DataPath>
					<ContextMenu name="КомментарийЗамещающегоКонтекстноеМеню" id="34"/>
					<ExtendedTooltip name="КомментарийЗамещающегоРасширеннаяПодсказка" id="51"/>
				</LabelField>
				<CheckBoxField name="Согласован" id="66">
					<DataPath>Список.Согласован</DataPath>
					<CheckBoxType>Auto</CheckBoxType>
					<ContextMenu name="СогласованКонтекстноеМеню" id="67"/>
					<ExtendedTooltip name="СогласованРасширеннаяПодсказка" id="68"/>
				</CheckBoxField>
			</ChildItems>
		</Table>
		<Table name="Согласование" id="16">
			<Representation>List</Representation>
			<TitleLocation>Top</TitleLocation>
			<TitleHeight>2</TitleHeight>
			<AutoInsertNewRow>true</AutoInsertNewRow>
			<EnableStartDrag>true</EnableStartDrag>
			<EnableDrag>true</EnableDrag>
			<FileDragMode>AsFile</FileDragMode>
			<DataPath>~Items.Список.CurrentData.Согласование</DataPath>
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Согласование отпуска</v8:content>
				</v8:item>
			</Title>
			<TitleFont ref="sys:DefaultGUIFont" height="12" bold="true" italic="false" underline="false" strikeout="false" kind="WindowsFont"/>
			<SearchStringLocation>None</SearchStringLocation>
			<ViewStatusLocation>None</ViewStatusLocation>
			<SearchControlLocation>None</SearchControlLocation>
			<RowFilter xsi:nil="true"/>
			<ContextMenu name="СогласованиеКонтекстноеМеню" id="17"/>
			<AutoCommandBar name="СогласованиеКоманднаяПанель" id="18"/>
			<ExtendedTooltip name="СогласованиеРасширеннаяПодсказка" id="52"/>
			<SearchStringAddition name="СогласованиеСтрокаПоиска" id="53">
				<AdditionSource>
					<Item>Согласование</Item>
					<Type>SearchStringRepresentation</Type>
				</AdditionSource>
				<ContextMenu name="СогласованиеСтрокаПоискаКонтекстноеМеню" id="54"/>
				<ExtendedTooltip name="СогласованиеСтрокаПоискаРасширеннаяПодсказка" id="55"/>
			</SearchStringAddition>
			<ViewStatusAddition name="СогласованиеСостояниеПросмотра" id="56">
				<AdditionSource>
					<Item>Согласование</Item>
					<Type>ViewStatusRepresentation</Type>
				</AdditionSource>
				<ContextMenu name="СогласованиеСостояниеПросмотраКонтекстноеМеню" id="57"/>
				<ExtendedTooltip name="СогласованиеСостояниеПросмотраРасширеннаяПодсказка" id="58"/>
			</ViewStatusAddition>
			<SearchControlAddition name="СогласованиеУправлениеПоиском" id="59">
				<AdditionSource>
					<Item>Согласование</Item>
					<Type>SearchControl</Type>
				</AdditionSource>
				<ContextMenu name="СогласованиеУправлениеПоискомКонтекстноеМеню" id="60"/>
				<ExtendedTooltip name="СогласованиеУправлениеПоискомРасширеннаяПодсказка" id="61"/>
			</SearchControlAddition>
			<ChildItems>
				<InputField name="СогласованиеПользователь" id="25">
					<DataPath>~Items.Список.CurrentData.Согласование.Пользователь</DataPath>
					<EditMode>EnterOnInput</EditMode>
					<ContextMenu name="СогласованиеПользовательКонтекстноеМеню" id="26"/>
					<ExtendedTooltip name="СогласованиеПользовательРасширеннаяПодсказка" id="62"/>
				</InputField>
				<LabelField name="СогласованиеПройден" id="27">
					<DataPath>~Items.Список.CurrentData.Согласование.Пройден</DataPath>
					<EditMode>EnterOnInput</EditMode>
					<ContextMenu name="СогласованиеПройденКонтекстноеМеню" id="28"/>
					<ExtendedTooltip name="СогласованиеПройденРасширеннаяПодсказка" id="63"/>
				</LabelField>
				<LabelField name="СогласованиеСогласовано" id="29">
					<DataPath>~Items.Список.CurrentData.Согласование.Согласовано</DataPath>
					<EditMode>EnterOnInput</EditMode>
					<ContextMenu name="СогласованиеСогласованоКонтекстноеМеню" id="30"/>
					<ExtendedTooltip name="СогласованиеСогласованоРасширеннаяПодсказка" id="64"/>
				</LabelField>
				<InputField name="СогласованиеКомментарииПользователя" id="23">
					<DataPath>~Items.Список.CurrentData.Согласование.КомментарииПользователя</DataPath>
					<EditMode>EnterOnInput</EditMode>
					<ContextMenu name="СогласованиеКомментарииПользователяКонтекстноеМеню" id="24"/>
					<ExtendedTooltip name="СогласованиеКомментарииПользователяРасширеннаяПодсказка" id="65"/>
				</InputField>
			</ChildItems>
		</Table>
	</ChildItems>
	<Attributes>
		<Attribute name="Список" id="1">
			<Type>
				<v8:Type>cfg:DynamicList</v8:Type>
			</Type>
			<MainAttribute>true</MainAttribute>
			<Settings xsi:type="DynamicList">
				<ManualQuery>true</ManualQuery>
				<DynamicDataRead>true</DynamicDataRead>
				<QueryText>ВЫБРАТЬ
	СправочниксабОтпускаСотрудников.Ссылка КАК Ссылка,
	СправочниксабОтпускаСотрудников.ПометкаУдаления КАК ПометкаУдаления,
	СправочниксабОтпускаСотрудников.Предопределенный КАК Предопределенный,
	СправочниксабОтпускаСотрудников.Код КАК Код,
	СправочниксабОтпускаСотрудников.Наименование КАК Наименование,
	ВЫБОР
		КОГДА сабОтпускаСотрудников.ОтпускникОтсутствуетВБазе
			ТОГДА сабОтпускаСотрудников.СотрудникОтпускник
		ИНАЧЕ СправочниксабОтпускаСотрудников.Пользователь
	КОНЕЦ КАК Пользователь,
	ВЫБОР
		КОГДА сабОтпускаСотрудников.ОтпускникОтсутствуетВБазе
			ТОГДА сабОтпускаСотрудников.СотрудникЗамещающий
		ИНАЧЕ СправочниксабОтпускаСотрудников.Замещающий
	КОНЕЦ КАК Замещающий,
	СправочниксабОтпускаСотрудников.ДатаНачала КАК ДатаНачала,
	СправочниксабОтпускаСотрудников.ДатаОкончания КАК ДатаОкончания,
	СправочниксабОтпускаСотрудников.ПользовательСогласовал КАК ПользовательСогласовал,
	СправочниксабОтпускаСотрудников.ЗамещающийСогласовал КАК ЗамещающийСогласовал,
	ВЫБОР
		КОГДА СправочниксабОтпускаСотрудников.ДатаОкончания &gt; &amp;ТекДата
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК Текущий,
	СправочниксабОтпускаСотрудников.ТехническийОтпуск КАК ТехническийОтпуск,
	СправочниксабОтпускаСотрудников.ДопСогласование.(
		Ссылка КАК Ссылка,
		НомерСтроки КАК НомерСтроки,
		СубъектСогласования КАК СубъектСогласования,
		Пройден КАК Пройден,
		Согласовано КАК Согласовано,
		КомментарииПользователя КАК КомментарииПользователя
	) КАК ДопСогласование,
	сабОтпускаСотрудников.КомментарийЗамещающего КАК КомментарийЗамещающего,
	сабОтпускаСотрудников.Примечания КАК Примечания,
	ВЫБОР
		КОГДА ВложенныйЗапрос.Ссылка ЕСТЬ NULL
			ТОГДА ЛОЖЬ
		ИНАЧЕ ИСТИНА
	КОНЕЦ КАК Согласован
ИЗ
	Справочник.сабОтпускаСотрудников КАК СправочниксабОтпускаСотрудников
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.сабОтпускаСотрудников КАК сабОтпускаСотрудников
		ПО СправочниксабОтпускаСотрудников.Ссылка = сабОтпускаСотрудников.Ссылка
			И (ВЫБОР
				КОГДА &amp;админ = ИСТИНА
					ТОГДА ИСТИНА
				ИНАЧЕ сабОтпускаСотрудников.ДопСогласование.СубъектСогласования В (&amp;Пользователь)
			КОНЕЦ)
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			сабОтпускаСотрудниковДопСогласование.Ссылка КАК Ссылка
		ИЗ
			Справочник.сабОтпускаСотрудников.ДопСогласование КАК сабОтпускаСотрудниковДопСогласование
		
		СГРУППИРОВАТЬ ПО
			сабОтпускаСотрудниковДопСогласование.Ссылка
		
		ИМЕЮЩИЕ
			СУММА(ВЫБОР
					КОГДА сабОтпускаСотрудниковДопСогласование.Согласовано
						ТОГДА 1
					ИНАЧЕ 0
				КОНЕЦ) = КОЛИЧЕСТВО(сабОтпускаСотрудниковДопСогласование.НомерСтроки)) КАК ВложенныйЗапрос
		ПО СправочниксабОтпускаСотрудников.Ссылка = ВложенныйЗапрос.Ссылка
ГДЕ
	ВЫБОР
			КОГДА &amp;админ = ИСТИНА
				ТОГДА ИСТИНА
			ИНАЧЕ СправочниксабОтпускаСотрудников.Пользователь В (&amp;Пользователь)
					ИЛИ СправочниксабОтпускаСотрудников.Замещающий В (&amp;Пользователь)
					ИЛИ НЕ сабОтпускаСотрудников.Ссылка ЕСТЬ NULL
		КОНЕЦ</QueryText>
				<MainTable>Catalog.сабОтпускаСотрудников</MainTable>
				<ListSettings>
					<dcsset:filter>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>dfcece9d-5077-440b-b6b3-45a5cb4538eb</dcsset:userSettingID>
					</dcsset:filter>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemField">
							<dcsset:field>ДатаНачала</dcsset:field>
							<dcsset:orderType>Asc</dcsset:orderType>
						</dcsset:item>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>88619765-ccb3-46c6-ac52-38e9c992ebd4</dcsset:userSettingID>
					</dcsset:order>
					<dcsset:conditionalAppearance>
						<dcsset:item>
							<dcsset:selection/>
							<dcsset:filter>
								<dcsset:item xsi:type="dcsset:FilterItemComparison">
									<dcsset:left xsi:type="dcscor:Field">Текущий</dcsset:left>
									<dcsset:comparisonType>Equal</dcsset:comparisonType>
									<dcsset:right xsi:type="xs:boolean">true</dcsset:right>
								</dcsset:item>
							</dcsset:filter>
							<dcsset:appearance>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:parameter>ЦветТекста</dcscor:parameter>
									<dcscor:value xsi:type="v8ui:Color">style:FieldSelectionBackColor</dcscor:value>
								</dcscor:item>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:parameter>Шрифт</dcscor:parameter>
									<dcscor:value xsi:type="v8ui:Font" ref="sys:DefaultGUIFont" bold="true" italic="false" underline="false" strikeout="false" kind="WindowsFont"/>
								</dcscor:item>
							</dcsset:appearance>
						</dcsset:item>
						<dcsset:item>
							<dcsset:selection/>
							<dcsset:filter>
								<dcsset:item xsi:type="dcsset:FilterItemComparison">
									<dcsset:left xsi:type="dcscor:Field">ТехническийОтпуск</dcsset:left>
									<dcsset:comparisonType>Equal</dcsset:comparisonType>
									<dcsset:right xsi:type="xs:boolean">true</dcsset:right>
								</dcsset:item>
							</dcsset:filter>
							<dcsset:appearance>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:parameter>ЦветТекста</dcscor:parameter>
									<dcscor:value xsi:type="v8ui:Color">style:NegativeTextColor</dcscor:value>
								</dcscor:item>
							</dcsset:appearance>
						</dcsset:item>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>b75fecce-942b-4aed-abc9-e6a02e460fb3</dcsset:userSettingID>
					</dcsset:conditionalAppearance>
					<dcsset:itemsViewMode>Normal</dcsset:itemsViewMode>
					<dcsset:itemsUserSettingID>911b6018-f537-43e8-a417-da56b22f9aec</dcsset:itemsUserSettingID>
				</ListSettings>
			</Settings>
		</Attribute>
		<ConditionalAppearance>
			<dcsset:item>
				<dcsset:selection>
					<dcsset:item>
						<dcsset:field>Наименование</dcsset:field>
					</dcsset:item>
					<dcsset:item>
						<dcsset:field>Пользователь</dcsset:field>
					</dcsset:item>
					<dcsset:item>
						<dcsset:field>Замещающий</dcsset:field>
					</dcsset:item>
					<dcsset:item>
						<dcsset:field>ДатаНачала</dcsset:field>
					</dcsset:item>
					<dcsset:item>
						<dcsset:field>ДатаОкончания</dcsset:field>
					</dcsset:item>
					<dcsset:item>
						<dcsset:field>Примечания</dcsset:field>
					</dcsset:item>
					<dcsset:item>
						<dcsset:field>КомментарийЗамещающего</dcsset:field>
					</dcsset:item>
				</dcsset:selection>
				<dcsset:filter>
					<dcsset:item xsi:type="dcsset:FilterItemComparison">
						<dcsset:left xsi:type="dcscor:Field">Список.Согласован</dcsset:left>
						<dcsset:comparisonType>Equal</dcsset:comparisonType>
						<dcsset:right xsi:type="xs:boolean">true</dcsset:right>
					</dcsset:item>
				</dcsset:filter>
				<dcsset:appearance>
					<dcscor:item xsi:type="dcsset:SettingsParameterValue">
						<dcscor:parameter>ЦветТекста</dcscor:parameter>
						<dcscor:value xsi:type="v8ui:Color">#339966</dcscor:value>
					</dcscor:item>
				</dcsset:appearance>
			</dcsset:item>
		</ConditionalAppearance>
	</Attributes>
</Form>