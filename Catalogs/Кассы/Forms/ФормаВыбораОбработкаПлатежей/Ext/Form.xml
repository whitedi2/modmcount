<?xml version="1.0" encoding="UTF-8"?>
<Form xmlns="http://v8.1c.ru/8.3/xcf/logform" xmlns:app="http://v8.1c.ru/8.2/managed-application/core" xmlns:cfg="http://v8.1c.ru/8.1/data/enterprise/current-config" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:ent="http://v8.1c.ru/8.1/data/enterprise" xmlns:lf="http://v8.1c.ru/8.2/managed-application/logform" xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows" xmlns:xr="http://v8.1c.ru/8.3/xcf/readable" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.16">
	<WindowOpeningMode>LockOwnerWindow</WindowOpeningMode>
	<VerticalScroll>useIfNecessary</VerticalScroll>
	<AutoCommandBar name="ФормаКоманднаяПанель" id="-1"/>
	<Events>
		<Event name="OnCreateAtServer">ПриСозданииНаСервере</Event>
	</Events>
	<ChildItems>
		<Table name="Список" id="1">
			<Representation>List</Representation>
			<CommandBarLocation>None</CommandBarLocation>
			<DefaultItem>true</DefaultItem>
			<ChoiceMode>true</ChoiceMode>
			<UseAlternationRowColor>true</UseAlternationRowColor>
			<InitialTreeView>ExpandTopLevel</InitialTreeView>
			<EnableStartDrag>true</EnableStartDrag>
			<FileDragMode>AsFile</FileDragMode>
			<DataPath>Список</DataPath>
			<RowPictureDataPath>Список.DefaultPicture</RowPictureDataPath>
			<SearchStringLocation>None</SearchStringLocation>
			<ViewStatusLocation>None</ViewStatusLocation>
			<SearchControlLocation>None</SearchControlLocation>
			<AutoRefresh>false</AutoRefresh>
			<AutoRefreshPeriod>60</AutoRefreshPeriod>
			<Period>
				<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
				<v8:startDate>0001-01-01T00:00:00</v8:startDate>
				<v8:endDate>0001-01-01T00:00:00</v8:endDate>
			</Period>
			<ChoiceFoldersAndItems>Items</ChoiceFoldersAndItems>
			<RestoreCurrentRow>false</RestoreCurrentRow>
			<TopLevelParent xsi:nil="true"/>
			<ShowRoot>true</ShowRoot>
			<AllowRootChoice>false</AllowRootChoice>
			<UpdateOnDataChange>Auto</UpdateOnDataChange>
			<AllowGettingCurrentRowURL>true</AllowGettingCurrentRowURL>
			<ContextMenu name="СписокКонтекстноеМеню" id="2"/>
			<AutoCommandBar name="СписокКоманднаяПанель" id="3">
				<Autofill>false</Autofill>
			</AutoCommandBar>
			<ExtendedTooltip name="СписокExtendedTooltip" id="16"/>
			<SearchStringAddition name="СписокСтрокаПоиска" id="23">
				<AdditionSource>
					<Item>Список</Item>
					<Type>SearchStringRepresentation</Type>
				</AdditionSource>
				<ContextMenu name="СписокСтрокаПоискаКонтекстноеМеню" id="24"/>
				<ExtendedTooltip name="СписокСтрокаПоискаРасширеннаяПодсказка" id="25"/>
			</SearchStringAddition>
			<ViewStatusAddition name="СписокСостояниеПросмотра" id="26">
				<AdditionSource>
					<Item>Список</Item>
					<Type>ViewStatusRepresentation</Type>
				</AdditionSource>
				<ContextMenu name="СписокСостояниеПросмотраКонтекстноеМеню" id="27"/>
				<ExtendedTooltip name="СписокСостояниеПросмотраРасширеннаяПодсказка" id="28"/>
			</ViewStatusAddition>
			<SearchControlAddition name="СписокУправлениеПоиском" id="29">
				<AdditionSource>
					<Item>Список</Item>
					<Type>SearchControl</Type>
				</AdditionSource>
				<ContextMenu name="СписокУправлениеПоискомКонтекстноеМеню" id="30"/>
				<ExtendedTooltip name="СписокУправлениеПоискомРасширеннаяПодсказка" id="31"/>
			</SearchControlAddition>
			<ChildItems>
				<LabelField name="Наименование" id="4">
					<DataPath>~Список.Наименование</DataPath>
					<DefaultItem>true</DefaultItem>
					<Title>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Наименование</v8:content>
						</v8:item>
					</Title>
					<ContextMenu name="НаименованиеКонтекстноеМеню" id="5"/>
					<ExtendedTooltip name="НаименованиеExtendedTooltip" id="17"/>
				</LabelField>
				<LabelField name="Предприятие" id="6">
					<DataPath>~Список.Предприятие</DataPath>
					<ContextMenu name="ПредприятиеКонтекстноеМеню" id="7"/>
					<ExtendedTooltip name="ПредприятиеExtendedTooltip" id="18"/>
				</LabelField>
				<LabelField name="ВидИсточника" id="8">
					<DataPath>~Список.ВидИсточника</DataPath>
					<ContextMenu name="ВидИсточникаКонтекстноеМеню" id="9"/>
					<ExtendedTooltip name="ВидИсточникаExtendedTooltip" id="19"/>
				</LabelField>
				<LabelField name="КоличествоНеобработанных" id="14">
					<DataPath>~Список.КоличествоНеобработанных</DataPath>
					<ContextMenu name="КоличествоНеобработанныхКонтекстноеМеню" id="15"/>
					<ExtendedTooltip name="КоличествоНеобработанныхExtendedTooltip" id="20"/>
				</LabelField>
				<CheckBoxField name="Проверен" id="10">
					<DataPath>~Список.Проверен</DataPath>
					<CheckBoxType>Auto</CheckBoxType>
					<ContextMenu name="ПроверенКонтекстноеМеню" id="11"/>
					<ExtendedTooltip name="ПроверенExtendedTooltip" id="21"/>
				</CheckBoxField>
				<LabelField name="ДатаПоследнегоПлатежка" id="12">
					<DataPath>~Список.ДатаПоследнегоПлатежка</DataPath>
					<ContextMenu name="ДатаПоследнегоПлатежкаКонтекстноеМеню" id="13"/>
					<ExtendedTooltip name="ДатаПоследнегоПлатежкаExtendedTooltip" id="22"/>
				</LabelField>
			</ChildItems>
		</Table>
	</ChildItems>
	<Attributes>
		<Attribute name="Список" id="1">
			<Type>
				<v8:Type>cfg:DynamicList</v8:Type>
			</Type>
			<MainAttribute>true</MainAttribute>
			<Settings xsi:type="DynamicList">
				<ManualQuery>true</ManualQuery>
				<DynamicDataRead>true</DynamicDataRead>
				<QueryText>ВЫБРАТЬ
	ВложенныйЗапрос.Предприятие,
	МАКСИМУМ(ВложенныйЗапрос.ДатаПоследнегоПлатежка) КАК ДатаПоследнегоПлатежка,
	СУММА(ВЫБОР
			КОГДА ВложенныйЗапрос.Регистратор ЕСТЬ NULL 
					ИЛИ ВложенныйЗапрос.Регистратор ССЫЛКА Документ.ПП_ПереоценкаВалютныхОстатков
					ИЛИ ВложенныйЗапрос.Регистратор ССЫЛКА Документ.ПП_ВводОстатков
				ТОГДА 0
			ИНАЧЕ ВЫБОР
					КОГДА УЧ_ДвижениеДС.Ссылка ЕСТЬ NULL 
						ТОГДА 1
					ИНАЧЕ 0
				КОНЕЦ
		КОНЕЦ) КАК КоличествоНеобработанных,
	Кассы.Наименование КАК Наименование,
	Кассы.Ссылка КАК Ссылка,
	Кассы.ПометкаУдаления КАК ПометкаУдаления,
	Кассы.Предопределенный КАК Предопределенный,
	Кассы.Код КАК Код,
	Кассы.ВидИсточника КАК ВидИсточника,
	Кассы.Проверен КАК Проверен,
	Кассы.ДатаЗакрытия КАК ДатаЗакрытия,
	Кассы.ИсточникЗакрыт КАК ИсточникЗакрыт
ИЗ
	(ВЫБРАТЬ
		СправочникИсточники.Ссылка КАК Ссылка,
		СправочникИсточники.ПометкаУдаления КАК ПометкаУдаления,
		СправочникИсточники.Предопределенный КАК Предопределенный,
		СправочникИсточники.Код КАК Код,
		СправочникИсточники.Наименование КАК Наименование,
		Д_ИсточникППСрезПоследних.Предприятие КАК Предприятие,
		СправочникИсточники.ВидИсточника КАК ВидИсточника,
		СправочникИсточники.Проверен КАК Проверен,
		МАКСИМУМ(Платежки.Период) КАК ДатаПоследнегоПлатежка,
		СправочникИсточники.ДатаЗакрытия КАК ДатаЗакрытия,
		СправочникИсточники.ИсточникЗакрыт КАК ИсточникЗакрыт,
		Платежки.Регистратор КАК Регистратор
	ИЗ
		Справочник.Кассы КАК СправочникИсточники
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Д_ИсточникПП.СрезПоследних КАК Д_ИсточникППСрезПоследних
			ПО (Д_ИсточникППСрезПоследних.БанковскиеСчета = СправочникИсточники.Ссылка)
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.Платежки КАК Платежки
			ПО СправочникИсточники.Ссылка = Платежки.БанковскиеСчета
	ГДЕ
		ВЫБОР
				КОГДА Д_ИсточникППСрезПоследних.Предприятие ЕСТЬ NULL 
						ИЛИ ЗНАЧЕНИЕ(Справочник.Предприятия.ПустаяСсылка) В (&amp;ТекущееПредприятие)
					ТОГДА ЗНАЧЕНИЕ(Справочник.Предприятия.ПустаяСсылка) В ИЕРАРХИИ (&amp;ТекущееПредприятие)
							ИЛИ СправочникИсточники.Предопределенный
				ИНАЧЕ Д_ИсточникППСрезПоследних.Предприятие В ИЕРАРХИИ (&amp;ТекущееПредприятие)
			КОНЕЦ
		И ВЫБОР
				КОГДА &amp;ТипИсточника ЕСТЬ NULL 
						ИЛИ СправочникИсточники.Предопределенный
					ТОГДА ИСТИНА
				ИНАЧЕ СправочникИсточники.ВидИсточника В (&amp;ТипИсточника)
			КОНЕЦ
		И ВЫБОР
				КОГДА &amp;Источники = ИСТИНА
					ТОГДА СправочникИсточники.Ссылка В (&amp;ДоступныеИсточники)
				ИНАЧЕ ИСТИНА
			КОНЕЦ
	
	СГРУППИРОВАТЬ ПО
		СправочникИсточники.Ссылка,
		СправочникИсточники.ПометкаУдаления,
		СправочникИсточники.Предопределенный,
		СправочникИсточники.Код,
		СправочникИсточники.Наименование,
		Д_ИсточникППСрезПоследних.Предприятие,
		СправочникИсточники.ВидИсточника,
		СправочникИсточники.Проверен,
		СправочникИсточники.ДатаЗакрытия,
		СправочникИсточники.ИсточникЗакрыт,
		Платежки.Регистратор) КАК ВложенныйЗапрос
		ЛЕВОЕ СОЕДИНЕНИЕ Документ.УЧ_ДвижениеДС КАК УЧ_ДвижениеДС
		ПО ВложенныйЗапрос.Регистратор = УЧ_ДвижениеДС.ДокОснование
			И (УЧ_ДвижениеДС.ПометкаУдаления = ЛОЖЬ)
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.Кассы КАК Кассы
		ПО ВложенныйЗапрос.Ссылка = Кассы.Ссылка

СГРУППИРОВАТЬ ПО
	ВложенныйЗапрос.Предприятие,
	Кассы.Наименование,
	Кассы.Ссылка,
	Кассы.ПометкаУдаления,
	Кассы.Предопределенный,
	Кассы.Код,
	Кассы.ВидИсточника,
	Кассы.Проверен,
	Кассы.ДатаЗакрытия,
	Кассы.ИсточникЗакрыт</QueryText>
				<MainTable>Catalog.Кассы</MainTable>
				<ListSettings>
					<dcsset:filter>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>dfcece9d-5077-440b-b6b3-45a5cb4538eb</dcsset:userSettingID>
					</dcsset:filter>
					<dcsset:order>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>88619765-ccb3-46c6-ac52-38e9c992ebd4</dcsset:userSettingID>
					</dcsset:order>
					<dcsset:conditionalAppearance>
						<dcsset:item>
							<dcsset:selection/>
							<dcsset:filter>
								<dcsset:item xsi:type="dcsset:FilterItemComparison">
									<dcsset:left xsi:type="dcscor:Field">ИсточникЗакрыт</dcsset:left>
									<dcsset:comparisonType>Equal</dcsset:comparisonType>
									<dcsset:right xsi:type="xs:boolean">true</dcsset:right>
								</dcsset:item>
							</dcsset:filter>
							<dcsset:appearance>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:parameter>ЦветТекста</dcscor:parameter>
									<dcscor:value xsi:type="v8ui:Color">#808080</dcscor:value>
								</dcscor:item>
							</dcsset:appearance>
						</dcsset:item>
						<dcsset:item>
							<dcsset:selection/>
							<dcsset:filter>
								<dcsset:item xsi:type="dcsset:FilterItemComparison">
									<dcsset:left xsi:type="dcscor:Field">КоличествоНеобработанных</dcsset:left>
									<dcsset:comparisonType>NotEqual</dcsset:comparisonType>
									<dcsset:right xsi:type="xs:decimal">0</dcsset:right>
								</dcsset:item>
							</dcsset:filter>
							<dcsset:appearance>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:parameter>Шрифт</dcscor:parameter>
									<dcscor:value xsi:type="v8ui:Font" ref="sys:DefaultGUIFont" bold="true" italic="false" underline="false" strikeout="false" kind="WindowsFont"/>
								</dcscor:item>
							</dcsset:appearance>
						</dcsset:item>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>b75fecce-942b-4aed-abc9-e6a02e460fb3</dcsset:userSettingID>
					</dcsset:conditionalAppearance>
					<dcsset:itemsViewMode>Normal</dcsset:itemsViewMode>
					<dcsset:itemsUserSettingID>911b6018-f537-43e8-a417-da56b22f9aec</dcsset:itemsUserSettingID>
				</ListSettings>
			</Settings>
		</Attribute>
	</Attributes>
</Form>